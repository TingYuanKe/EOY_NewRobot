<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>OpenNI 2.0: OpenNI.h Source File</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />



</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  <td id="projectlogo"><img alt="Logo" src="OpenNILogo.bmp"/></td>
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">OpenNI 2.0
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">OpenNI.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="_open_n_i_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*****************************************************************************</span>
<a name="l00002"></a>00002 <span class="comment">*                                                                            *</span>
<a name="l00003"></a>00003 <span class="comment">*  OpenNI 2.x Alpha                                                          *</span>
<a name="l00004"></a>00004 <span class="comment">*  Copyright (C) 2012 PrimeSense Ltd.                                        *</span>
<a name="l00005"></a>00005 <span class="comment">*                                                                            *</span>
<a name="l00006"></a>00006 <span class="comment">*  This file is part of OpenNI.                                              *</span>
<a name="l00007"></a>00007 <span class="comment">*                                                                            *</span>
<a name="l00008"></a>00008 <span class="comment">*  Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);           *</span>
<a name="l00009"></a>00009 <span class="comment">*  you may not use this file except in compliance with the License.          *</span>
<a name="l00010"></a>00010 <span class="comment">*  You may obtain a copy of the License at                                   *</span>
<a name="l00011"></a>00011 <span class="comment">*                                                                            *</span>
<a name="l00012"></a>00012 <span class="comment">*      http://www.apache.org/licenses/LICENSE-2.0                            *</span>
<a name="l00013"></a>00013 <span class="comment">*                                                                            *</span>
<a name="l00014"></a>00014 <span class="comment">*  Unless required by applicable law or agreed to in writing, software       *</span>
<a name="l00015"></a>00015 <span class="comment">*  distributed under the License is distributed on an &quot;AS IS&quot; BASIS,         *</span>
<a name="l00016"></a>00016 <span class="comment">*  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.  *</span>
<a name="l00017"></a>00017 <span class="comment">*  See the License for the specific language governing permissions and       *</span>
<a name="l00018"></a>00018 <span class="comment">*  limitations under the License.                                            *</span>
<a name="l00019"></a>00019 <span class="comment">*                                                                            *</span>
<a name="l00020"></a>00020 <span class="comment">*****************************************************************************/</span>
<a name="l00021"></a>00021 <span class="preprocessor">#ifndef _OPENNI_H_</span>
<a name="l00022"></a>00022 <span class="preprocessor"></span><span class="preprocessor">#define _OPENNI_H_</span>
<a name="l00023"></a>00023 <span class="preprocessor"></span>
<a name="l00024"></a>00024 <span class="preprocessor">#include &quot;OniPlatform.h&quot;</span>
<a name="l00025"></a>00025 <span class="preprocessor">#include &quot;OniProperties.h&quot;</span>
<a name="l00026"></a>00026 <span class="preprocessor">#include &quot;<a class="code" href="_oni_enums_8h.html">OniEnums.h</a>&quot;</span>
<a name="l00027"></a>00027 
<a name="l00028"></a>00028 <span class="preprocessor">#include &quot;OniCAPI.h&quot;</span>
<a name="l00029"></a>00029 <span class="preprocessor">#include &quot;OniCProperties.h&quot;</span>
<a name="l00030"></a>00030 
<a name="l00034"></a><a class="code" href="namespaceopenni.html">00034</a> <span class="keyword">namespace </span>openni
<a name="l00035"></a>00035 {
<a name="l00036"></a>00036 
<a name="l00038"></a><a class="code" href="namespaceopenni.html#ab2403242071ff06fc6fe18c0c6111d0f">00038</a> <span class="keyword">typedef</span> uint16_t                <a class="code" href="namespaceopenni.html#ab2403242071ff06fc6fe18c0c6111d0f">DepthPixel</a>;
<a name="l00039"></a>00039 
<a name="l00041"></a><a class="code" href="namespaceopenni.html#a15bcac1ff77c313557dd28804c31c4ff">00041</a> <span class="keyword">typedef</span> uint16_t                <a class="code" href="namespaceopenni.html#a15bcac1ff77c313557dd28804c31c4ff">Grayscale16Pixel</a>;
<a name="l00042"></a>00042 
<a name="l00043"></a>00043 <span class="comment">// structs</span>
<a name="l00045"></a><a class="code" href="structopenni_1_1_version.html">00045</a> <span class="comment"></span><span class="keyword">typedef</span> <span class="keyword">struct</span>
<a name="l00046"></a>00046 {
<a name="l00048"></a><a class="code" href="structopenni_1_1_version.html#a5ae4a632961fa57459d2ba5e461dea5b">00048</a>     <span class="keywordtype">int</span> <a class="code" href="structopenni_1_1_version.html#a5ae4a632961fa57459d2ba5e461dea5b">major</a>;
<a name="l00050"></a><a class="code" href="structopenni_1_1_version.html#aecc77ce1b6aa5866c7d5013d37fb1a5a">00050</a>     <span class="keywordtype">int</span> <a class="code" href="structopenni_1_1_version.html#aecc77ce1b6aa5866c7d5013d37fb1a5a">minor</a>;
<a name="l00052"></a><a class="code" href="structopenni_1_1_version.html#a975d3371cc404eb34bf17c97c09bd0b3">00052</a>     <span class="keywordtype">int</span> <a class="code" href="structopenni_1_1_version.html#a975d3371cc404eb34bf17c97c09bd0b3">maintenance</a>;
<a name="l00054"></a><a class="code" href="structopenni_1_1_version.html#a79f9cb7e9a828a3303c55498767f332e">00054</a>     <span class="keywordtype">int</span> <a class="code" href="structopenni_1_1_version.html#a79f9cb7e9a828a3303c55498767f332e">build</a>;
<a name="l00055"></a>00055 } <a class="code" href="structopenni_1_1_version.html">Version</a>;
<a name="l00056"></a>00056 
<a name="l00058"></a><a class="code" href="structopenni_1_1_r_g_b888_pixel.html">00058</a> <span class="keyword">typedef</span> <span class="keyword">struct</span>
<a name="l00059"></a>00059 {
<a name="l00060"></a>00060     <span class="comment">/* Red value of this pixel. */</span>
<a name="l00061"></a><a class="code" href="structopenni_1_1_r_g_b888_pixel.html#a386473055de76efb74b8fb820d39e9a1">00061</a>     uint8_t <a class="code" href="structopenni_1_1_r_g_b888_pixel.html#a386473055de76efb74b8fb820d39e9a1">r</a>;
<a name="l00062"></a>00062     <span class="comment">/* Green value of this pixel. */</span>
<a name="l00063"></a><a class="code" href="structopenni_1_1_r_g_b888_pixel.html#a7f41e1b7c3e0d376928a966d41068c2a">00063</a>     uint8_t <a class="code" href="structopenni_1_1_r_g_b888_pixel.html#a7f41e1b7c3e0d376928a966d41068c2a">g</a>;
<a name="l00064"></a>00064     <span class="comment">/* Blue value of this pixel. */</span>
<a name="l00065"></a><a class="code" href="structopenni_1_1_r_g_b888_pixel.html#a2c77b285c8caf7bd8f7b34a847f53f74">00065</a>     uint8_t <a class="code" href="structopenni_1_1_r_g_b888_pixel.html#a2c77b285c8caf7bd8f7b34a847f53f74">b</a>;
<a name="l00066"></a>00066 } <a class="code" href="structopenni_1_1_r_g_b888_pixel.html">RGB888Pixel</a>;
<a name="l00067"></a>00067 
<a name="l00073"></a><a class="code" href="structopenni_1_1_y_u_v422_double_pixel.html">00073</a> <span class="keyword">typedef</span> <span class="keyword">struct</span>
<a name="l00074"></a>00074 {
<a name="l00076"></a><a class="code" href="structopenni_1_1_y_u_v422_double_pixel.html#a01ad06ab1eda8a3af607b4bf53720974">00076</a>     uint8_t <a class="code" href="structopenni_1_1_y_u_v422_double_pixel.html#a01ad06ab1eda8a3af607b4bf53720974">u</a>;
<a name="l00078"></a><a class="code" href="structopenni_1_1_y_u_v422_double_pixel.html#ad77adbb7bbcd747ceee687cac0c2d479">00078</a>     uint8_t <a class="code" href="structopenni_1_1_y_u_v422_double_pixel.html#ad77adbb7bbcd747ceee687cac0c2d479">y1</a>;
<a name="l00080"></a><a class="code" href="structopenni_1_1_y_u_v422_double_pixel.html#ab1b8f2b619f286d7fc324db9ac30ee57">00080</a>     uint8_t <a class="code" href="structopenni_1_1_y_u_v422_double_pixel.html#ab1b8f2b619f286d7fc324db9ac30ee57">v</a>;
<a name="l00082"></a><a class="code" href="structopenni_1_1_y_u_v422_double_pixel.html#a877023a8447a329874a75cad01e38aed">00082</a>     uint8_t <a class="code" href="structopenni_1_1_y_u_v422_double_pixel.html#a877023a8447a329874a75cad01e38aed">y2</a>;
<a name="l00083"></a>00083 } <a class="code" href="structopenni_1_1_y_u_v422_double_pixel.html">YUV422DoublePixel</a>;
<a name="l00084"></a>00084 
<a name="l00086"></a>00086 <span class="preprocessor">#if ONI_PLATFORM != ONI_PLATFORM_WIN32</span>
<a name="l00087"></a>00087 <span class="preprocessor"></span><span class="preprocessor">#pragma GCC diagnostic ignored &quot;-Wunused-variable&quot;</span>
<a name="l00088"></a>00088 <span class="preprocessor"></span><span class="preprocessor">#pragma GCC diagnostic push</span>
<a name="l00089"></a>00089 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00090"></a><a class="code" href="namespaceopenni.html#ad917a99196968a7d3ce9e8ca0b222953">00090</a> <span class="preprocessor"></span><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="namespaceopenni.html#ad917a99196968a7d3ce9e8ca0b222953">ANY_DEVICE</a> = NULL;
<a name="l00091"></a>00091 <span class="preprocessor">#if ONI_PLATFORM != ONI_PLATFORM_WIN32</span>
<a name="l00092"></a>00092 <span class="preprocessor"></span><span class="preprocessor">#pragma GCC diagnostic pop</span>
<a name="l00093"></a>00093 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00094"></a>00094 <span class="preprocessor"></span>
<a name="l00099"></a>00099 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00100"></a><a class="code" href="classopenni_1_1_array.html">00100</a> <span class="keyword">class </span><a class="code" href="classopenni_1_1_array.html">Array</a>
<a name="l00101"></a>00101 {
<a name="l00102"></a>00102 <span class="keyword">public</span>:
<a name="l00106"></a><a class="code" href="classopenni_1_1_array.html#a19215ebd71c8da5c64bf9114eb1c9c46">00106</a>     <a class="code" href="classopenni_1_1_array.html#a19215ebd71c8da5c64bf9114eb1c9c46">Array</a>() : m_data(NULL), m_count(0), m_owner(false) {}
<a name="l00107"></a>00107 
<a name="l00115"></a><a class="code" href="classopenni_1_1_array.html#a4db39602aa6df3e6fa41d8d364a28f65">00115</a>     <a class="code" href="classopenni_1_1_array.html#a4db39602aa6df3e6fa41d8d364a28f65">Array</a>(<span class="keyword">const</span> T* data, <span class="keywordtype">int</span> count) : m_owner(false) { _setData(data, count); }
<a name="l00116"></a>00116 
<a name="l00120"></a><a class="code" href="classopenni_1_1_array.html#ac318cd0a03d863ea861791bb3f647253">00120</a>     <a class="code" href="classopenni_1_1_array.html#ac318cd0a03d863ea861791bb3f647253">~Array</a>()
<a name="l00121"></a>00121     {
<a name="l00122"></a>00122         clear();
<a name="l00123"></a>00123     }
<a name="l00124"></a>00124 
<a name="l00129"></a><a class="code" href="classopenni_1_1_array.html#a92cfa92a6569dbc4f9421f3aa13abe25">00129</a>     <span class="keywordtype">int</span> <a class="code" href="classopenni_1_1_array.html#a92cfa92a6569dbc4f9421f3aa13abe25">getSize</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_count; }
<a name="l00130"></a>00130 
<a name="l00134"></a><a class="code" href="classopenni_1_1_array.html#ad99996179b72b67eab31628dd21592e1">00134</a>     <span class="keyword">const</span> T&amp; <a class="code" href="classopenni_1_1_array.html#ad99996179b72b67eab31628dd21592e1">operator[]</a>(<span class="keywordtype">int</span> index)<span class="keyword"> const </span>{<span class="keywordflow">return</span> m_data[index];}
<a name="l00135"></a>00135 
<a name="l00146"></a>00146     <span class="keywordtype">void</span> _setData(<span class="keyword">const</span> T* data, <span class="keywordtype">int</span> count, <span class="keywordtype">bool</span> isOwner = <span class="keyword">false</span>)
<a name="l00147"></a>00147     {
<a name="l00148"></a>00148         clear();
<a name="l00149"></a>00149         m_count = count;
<a name="l00150"></a>00150         m_owner = isOwner;
<a name="l00151"></a>00151         <span class="keywordflow">if</span> (!isOwner)
<a name="l00152"></a>00152         {
<a name="l00153"></a>00153             m_data = data;
<a name="l00154"></a>00154         }
<a name="l00155"></a>00155         <span class="keywordflow">else</span>
<a name="l00156"></a>00156         {
<a name="l00157"></a>00157             m_data = <span class="keyword">new</span> T[count];
<a name="l00158"></a>00158             memcpy((<span class="keywordtype">void</span>*)m_data, data, count*<span class="keyword">sizeof</span>(T));
<a name="l00159"></a>00159         }
<a name="l00160"></a>00160     }
<a name="l00161"></a>00161 
<a name="l00162"></a>00162 <span class="keyword">private</span>:
<a name="l00163"></a>00163     <a class="code" href="classopenni_1_1_array.html#a19215ebd71c8da5c64bf9114eb1c9c46">Array</a>(<span class="keyword">const</span> Array&lt;T&gt;&amp;);
<a name="l00164"></a>00164     Array&lt;T&gt;&amp; operator=(<span class="keyword">const</span> Array&lt;T&gt;&amp;);
<a name="l00165"></a>00165 
<a name="l00166"></a>00166     <span class="keywordtype">void</span> clear()
<a name="l00167"></a>00167     {
<a name="l00168"></a>00168         <span class="keywordflow">if</span> (m_owner &amp;&amp; m_data != NULL)
<a name="l00169"></a>00169             <span class="keyword">delete</span> []m_data;
<a name="l00170"></a>00170         m_owner = <span class="keyword">false</span>;
<a name="l00171"></a>00171         m_data = NULL;
<a name="l00172"></a>00172         m_count = 0;
<a name="l00173"></a>00173     }
<a name="l00174"></a>00174 
<a name="l00175"></a>00175     <span class="keyword">const</span> T* m_data;
<a name="l00176"></a>00176     <span class="keywordtype">int</span> m_count;
<a name="l00177"></a>00177     <span class="keywordtype">bool</span> m_owner;
<a name="l00178"></a>00178 };
<a name="l00179"></a>00179 
<a name="l00180"></a>00180 <span class="comment">// Forward declaration of all</span>
<a name="l00181"></a>00181 <span class="keyword">class </span>SensorInfo;
<a name="l00182"></a>00182 <span class="keyword">class </span>VideoStream;
<a name="l00183"></a>00183 <span class="keyword">class </span>VideoFrameRef;
<a name="l00184"></a>00184 <span class="keyword">class </span>Device;
<a name="l00185"></a>00185 <span class="keyword">class </span>OpenNI;
<a name="l00186"></a>00186 <span class="keyword">class </span>CameraSettings;
<a name="l00187"></a>00187 <span class="keyword">class </span>PlaybackControl;
<a name="l00188"></a>00188 
<a name="l00203"></a><a class="code" href="classopenni_1_1_video_mode.html">00203</a> <span class="keyword">class </span><a class="code" href="classopenni_1_1_video_mode.html">VideoMode</a> : <span class="keyword">private</span> OniVideoMode
<a name="l00204"></a>00204 {
<a name="l00205"></a>00205 <span class="keyword">public</span>:
<a name="l00211"></a><a class="code" href="classopenni_1_1_video_mode.html#a6e7db60c5d475fcd039a6619816ae8d6">00211</a>     <a class="code" href="classopenni_1_1_video_mode.html#a6e7db60c5d475fcd039a6619816ae8d6">VideoMode</a>()
<a name="l00212"></a>00212     {}
<a name="l00213"></a>00213 
<a name="l00219"></a><a class="code" href="classopenni_1_1_video_mode.html#a6af750616c636565dcdf93fd137044e7">00219</a>     <a class="code" href="classopenni_1_1_video_mode.html#a6e7db60c5d475fcd039a6619816ae8d6">VideoMode</a>(<span class="keyword">const</span> <a class="code" href="classopenni_1_1_video_mode.html">VideoMode</a>&amp; other)
<a name="l00220"></a>00220     {
<a name="l00221"></a>00221         *<span class="keyword">this</span> = other;
<a name="l00222"></a>00222     }
<a name="l00223"></a>00223 
<a name="l00230"></a><a class="code" href="classopenni_1_1_video_mode.html#a7dc4cd97e74a1c99408bc2a39964c16d">00230</a>     <a class="code" href="classopenni_1_1_video_mode.html">VideoMode</a>&amp; <a class="code" href="classopenni_1_1_video_mode.html#a7dc4cd97e74a1c99408bc2a39964c16d">operator=</a>(<span class="keyword">const</span> <a class="code" href="classopenni_1_1_video_mode.html">VideoMode</a>&amp; other)
<a name="l00231"></a>00231     {
<a name="l00232"></a>00232         <a class="code" href="classopenni_1_1_video_mode.html#af7fd37bba526fced9c7dbbbf1ab419ea">setPixelFormat</a>(other.<a class="code" href="classopenni_1_1_video_mode.html#a40aa927adf7917389f48d9f5d8a09ab9">getPixelFormat</a>());
<a name="l00233"></a>00233         <a class="code" href="classopenni_1_1_video_mode.html#a01c52061617acb5f62a9eabf8b2acdbe">setResolution</a>(other.<a class="code" href="classopenni_1_1_video_mode.html#aa63e6c57d49bca4694e6c35404bbaf6c">getResolutionX</a>(), other.<a class="code" href="classopenni_1_1_video_mode.html#af7eb3ed0e7e5e11c44c97abad705244d">getResolutionY</a>());
<a name="l00234"></a>00234         <a class="code" href="classopenni_1_1_video_mode.html#ad77d3ea95c7df97759f7d232d738b30e">setFps</a>(other.<a class="code" href="classopenni_1_1_video_mode.html#a5d91e052575cadda03479815982e92e0">getFps</a>());
<a name="l00235"></a>00235 
<a name="l00236"></a>00236         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00237"></a>00237     }
<a name="l00238"></a>00238 
<a name="l00243"></a><a class="code" href="classopenni_1_1_video_mode.html#a40aa927adf7917389f48d9f5d8a09ab9">00243</a>     <a class="code" href="namespaceopenni.html#a6d1ecf2502394d600cb8d3709092d5a5">PixelFormat</a> <a class="code" href="classopenni_1_1_video_mode.html#a40aa927adf7917389f48d9f5d8a09ab9">getPixelFormat</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> (<a class="code" href="namespaceopenni.html#a6d1ecf2502394d600cb8d3709092d5a5">PixelFormat</a>)pixelFormat; }
<a name="l00244"></a>00244 
<a name="l00249"></a><a class="code" href="classopenni_1_1_video_mode.html#aa63e6c57d49bca4694e6c35404bbaf6c">00249</a>     <span class="keywordtype">int</span> <a class="code" href="classopenni_1_1_video_mode.html#aa63e6c57d49bca4694e6c35404bbaf6c">getResolutionX</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> resolutionX; }
<a name="l00250"></a>00250 
<a name="l00255"></a><a class="code" href="classopenni_1_1_video_mode.html#af7eb3ed0e7e5e11c44c97abad705244d">00255</a>     <span class="keywordtype">int</span> <a class="code" href="classopenni_1_1_video_mode.html#af7eb3ed0e7e5e11c44c97abad705244d">getResolutionY</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> resolutionY;}
<a name="l00256"></a>00256 
<a name="l00261"></a><a class="code" href="classopenni_1_1_video_mode.html#a5d91e052575cadda03479815982e92e0">00261</a>     <span class="keywordtype">int</span> <a class="code" href="classopenni_1_1_video_mode.html#a5d91e052575cadda03479815982e92e0">getFps</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> fps; }
<a name="l00262"></a>00262 
<a name="l00269"></a><a class="code" href="classopenni_1_1_video_mode.html#af7fd37bba526fced9c7dbbbf1ab419ea">00269</a>     <span class="keywordtype">void</span> <a class="code" href="classopenni_1_1_video_mode.html#af7fd37bba526fced9c7dbbbf1ab419ea">setPixelFormat</a>(<a class="code" href="namespaceopenni.html#a6d1ecf2502394d600cb8d3709092d5a5">PixelFormat</a> format) { this-&gt;pixelFormat = (OniPixelFormat)format; }
<a name="l00270"></a>00270 
<a name="l00278"></a><a class="code" href="classopenni_1_1_video_mode.html#a01c52061617acb5f62a9eabf8b2acdbe">00278</a>     <span class="keywordtype">void</span> <a class="code" href="classopenni_1_1_video_mode.html#a01c52061617acb5f62a9eabf8b2acdbe">setResolution</a>(<span class="keywordtype">int</span> resolutionX, <span class="keywordtype">int</span> resolutionY)
<a name="l00279"></a>00279     {
<a name="l00280"></a>00280         this-&gt;resolutionX = resolutionX;
<a name="l00281"></a>00281         this-&gt;resolutionY = resolutionY;
<a name="l00282"></a>00282     }
<a name="l00283"></a>00283 
<a name="l00290"></a><a class="code" href="classopenni_1_1_video_mode.html#ad77d3ea95c7df97759f7d232d738b30e">00290</a>     <span class="keywordtype">void</span> <a class="code" href="classopenni_1_1_video_mode.html#ad77d3ea95c7df97759f7d232d738b30e">setFps</a>(<span class="keywordtype">int</span> fps) { this-&gt;fps = fps; }
<a name="l00291"></a>00291 
<a name="l00292"></a><a class="code" href="classopenni_1_1_video_mode.html#a08ab6b96be9413b35b5898694db91bfb">00292</a>     <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classopenni_1_1_sensor_info.html">SensorInfo</a>;
<a name="l00293"></a><a class="code" href="classopenni_1_1_video_mode.html#a4fd1028f691947151ea08e0db214f01c">00293</a>     <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classopenni_1_1_video_stream.html">VideoStream</a>;
<a name="l00294"></a><a class="code" href="classopenni_1_1_video_mode.html#a19caa736db2e87abcc9d7c66bccaefb6">00294</a>     <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classopenni_1_1_video_frame_ref.html">VideoFrameRef</a>;
<a name="l00295"></a>00295 };
<a name="l00296"></a>00296 
<a name="l00314"></a><a class="code" href="classopenni_1_1_sensor_info.html">00314</a> <span class="keyword">class </span><a class="code" href="classopenni_1_1_sensor_info.html">SensorInfo</a>
<a name="l00315"></a>00315 {
<a name="l00316"></a>00316 <span class="keyword">public</span>:
<a name="l00321"></a><a class="code" href="classopenni_1_1_sensor_info.html#a13ba6152bbfbadf9c39eacdbab9ce82c">00321</a>     <a class="code" href="namespaceopenni.html#a50658bbbf9f6e9e57aa6ebdb768fd8c2">SensorType</a> <a class="code" href="classopenni_1_1_sensor_info.html#a13ba6152bbfbadf9c39eacdbab9ce82c">getSensorType</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> (<a class="code" href="namespaceopenni.html#a50658bbbf9f6e9e57aa6ebdb768fd8c2">SensorType</a>)m_pInfo-&gt;sensorType; }
<a name="l00322"></a>00322 
<a name="l00330"></a><a class="code" href="classopenni_1_1_sensor_info.html#a4dd9f8796091f2ad3853efe13929f719">00330</a>     <span class="keyword">const</span> <a class="code" href="classopenni_1_1_array.html">Array&lt;VideoMode&gt;</a>&amp; <a class="code" href="classopenni_1_1_sensor_info.html#a4dd9f8796091f2ad3853efe13929f719">getSupportedVideoModes</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_videoModes; }
<a name="l00331"></a>00331 
<a name="l00332"></a>00332 <span class="keyword">private</span>:
<a name="l00333"></a>00333     <a class="code" href="classopenni_1_1_sensor_info.html">SensorInfo</a>(<span class="keyword">const</span> <a class="code" href="classopenni_1_1_sensor_info.html">SensorInfo</a>&amp;);
<a name="l00334"></a>00334     <a class="code" href="classopenni_1_1_sensor_info.html">SensorInfo</a>&amp; operator=(<span class="keyword">const</span> <a class="code" href="classopenni_1_1_sensor_info.html">SensorInfo</a>&amp;);
<a name="l00335"></a>00335 
<a name="l00336"></a>00336     <a class="code" href="classopenni_1_1_sensor_info.html">SensorInfo</a>() : m_pInfo(NULL), m_videoModes(NULL, 0) {}
<a name="l00337"></a>00337 
<a name="l00338"></a>00338     SensorInfo(<span class="keyword">const</span> OniSensorInfo* pInfo) : m_pInfo(NULL), m_videoModes(NULL, 0)
<a name="l00339"></a>00339     {
<a name="l00340"></a>00340         _setInternal(pInfo);
<a name="l00341"></a>00341     }
<a name="l00342"></a>00342 
<a name="l00343"></a>00343     <span class="keywordtype">void</span> _setInternal(<span class="keyword">const</span> OniSensorInfo* pInfo)
<a name="l00344"></a>00344     {
<a name="l00345"></a>00345         m_pInfo = pInfo;
<a name="l00346"></a>00346         <span class="keywordflow">if</span> (pInfo == NULL)
<a name="l00347"></a>00347         {
<a name="l00348"></a>00348             m_videoModes._setData(NULL, 0);
<a name="l00349"></a>00349         }
<a name="l00350"></a>00350         <span class="keywordflow">else</span>
<a name="l00351"></a>00351         {
<a name="l00352"></a>00352             m_videoModes._setData(static_cast&lt;VideoMode*&gt;(pInfo-&gt;pSupportedVideoModes), pInfo-&gt;numSupportedVideoModes);
<a name="l00353"></a>00353         }
<a name="l00354"></a>00354     }
<a name="l00355"></a>00355 
<a name="l00356"></a>00356     <span class="keyword">const</span> OniSensorInfo* m_pInfo;
<a name="l00357"></a>00357     Array&lt;VideoMode&gt; m_videoModes;
<a name="l00358"></a>00358 
<a name="l00359"></a><a class="code" href="classopenni_1_1_sensor_info.html#a4fd1028f691947151ea08e0db214f01c">00359</a>     <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classopenni_1_1_video_stream.html">VideoStream</a>;
<a name="l00360"></a><a class="code" href="classopenni_1_1_sensor_info.html#a520fa05e0bf58785da428f7a0241eee2">00360</a>     <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classopenni_1_1_device.html">Device</a>;
<a name="l00361"></a>00361 };
<a name="l00362"></a>00362 
<a name="l00372"></a><a class="code" href="classopenni_1_1_device_info.html">00372</a> <span class="keyword">class </span><a class="code" href="classopenni_1_1_device_info.html">DeviceInfo</a> : <span class="keyword">private</span> OniDeviceInfo
<a name="l00373"></a>00373 {
<a name="l00374"></a>00374 <span class="keyword">public</span>:
<a name="l00379"></a><a class="code" href="classopenni_1_1_device_info.html#af4f01d41cff1abc9c8ac0b32425fee25">00379</a>     <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="classopenni_1_1_device_info.html#af4f01d41cff1abc9c8ac0b32425fee25">getUri</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> uri; }
<a name="l00381"></a><a class="code" href="classopenni_1_1_device_info.html#ac0299511484c97c396e29da8e807b139">00381</a>     <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="classopenni_1_1_device_info.html#ac0299511484c97c396e29da8e807b139">getVendor</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> vendor; }
<a name="l00383"></a><a class="code" href="classopenni_1_1_device_info.html#a9e6778ffdd87c71cd87fc0c811c305bf">00383</a>     <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="classopenni_1_1_device_info.html#a9e6778ffdd87c71cd87fc0c811c305bf">getName</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> name; }
<a name="l00385"></a><a class="code" href="classopenni_1_1_device_info.html#aab7d4575adff3fd5e835446a78c76e37">00385</a>     uint16_t <a class="code" href="classopenni_1_1_device_info.html#aab7d4575adff3fd5e835446a78c76e37">getUsbVendorId</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> usbVendorId; }
<a name="l00387"></a><a class="code" href="classopenni_1_1_device_info.html#a79580fdda1ed6e0592de2a8a49a7d947">00387</a>     uint16_t <a class="code" href="classopenni_1_1_device_info.html#a79580fdda1ed6e0592de2a8a49a7d947">getUsbProductId</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> usbProductId; }
<a name="l00388"></a>00388 
<a name="l00389"></a><a class="code" href="classopenni_1_1_device_info.html#a520fa05e0bf58785da428f7a0241eee2">00389</a>     <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classopenni_1_1_device.html">Device</a>;
<a name="l00390"></a><a class="code" href="classopenni_1_1_device_info.html#a1d661a036b1e7e29b65f2b012bc92d00">00390</a>     <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classopenni_1_1_open_n_i.html">OpenNI</a>;
<a name="l00391"></a>00391 };
<a name="l00392"></a>00392 
<a name="l00406"></a><a class="code" href="classopenni_1_1_video_frame_ref.html">00406</a> <span class="keyword">class </span><a class="code" href="classopenni_1_1_video_frame_ref.html">VideoFrameRef</a>
<a name="l00407"></a>00407 {
<a name="l00408"></a>00408 <span class="keyword">public</span>:
<a name="l00413"></a><a class="code" href="classopenni_1_1_video_frame_ref.html#af67a596c25b7bbde80f5ecc42644269d">00413</a>     <a class="code" href="classopenni_1_1_video_frame_ref.html#af67a596c25b7bbde80f5ecc42644269d">VideoFrameRef</a>()
<a name="l00414"></a>00414     {
<a name="l00415"></a>00415         m_pFrame = NULL;
<a name="l00416"></a>00416     }
<a name="l00417"></a>00417 
<a name="l00421"></a><a class="code" href="classopenni_1_1_video_frame_ref.html#a1003fbe08a41586b8bf98c8e3f76fd0d">00421</a>     <a class="code" href="classopenni_1_1_video_frame_ref.html#a1003fbe08a41586b8bf98c8e3f76fd0d">~VideoFrameRef</a>()
<a name="l00422"></a>00422     {
<a name="l00423"></a>00423         <a class="code" href="classopenni_1_1_video_frame_ref.html#aab68b2fe1564d62d739f09edca037ae3">release</a>();
<a name="l00424"></a>00424     }
<a name="l00425"></a>00425 
<a name="l00431"></a><a class="code" href="classopenni_1_1_video_frame_ref.html#ae7f1a028c98bf9969a5e5b504e37c378">00431</a>     <a class="code" href="classopenni_1_1_video_frame_ref.html#af67a596c25b7bbde80f5ecc42644269d">VideoFrameRef</a>(<span class="keyword">const</span> <a class="code" href="classopenni_1_1_video_frame_ref.html">VideoFrameRef</a>&amp; other) : m_pFrame(NULL)
<a name="l00432"></a>00432     {
<a name="l00433"></a>00433         _setFrame(other.m_pFrame);
<a name="l00434"></a>00434     }
<a name="l00435"></a>00435 
<a name="l00441"></a><a class="code" href="classopenni_1_1_video_frame_ref.html#aa60bde0bb1fa8db6992585ca80f57932">00441</a>     <a class="code" href="classopenni_1_1_video_frame_ref.html">VideoFrameRef</a>&amp; <a class="code" href="classopenni_1_1_video_frame_ref.html#aa60bde0bb1fa8db6992585ca80f57932">operator=</a>(<span class="keyword">const</span> <a class="code" href="classopenni_1_1_video_frame_ref.html">VideoFrameRef</a>&amp; other)
<a name="l00442"></a>00442     {
<a name="l00443"></a>00443         _setFrame(other.m_pFrame);
<a name="l00444"></a>00444         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00445"></a>00445     }
<a name="l00446"></a>00446 
<a name="l00452"></a><a class="code" href="classopenni_1_1_video_frame_ref.html#a1414fae176ed7bb88f3b02865014ee09">00452</a>     <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="classopenni_1_1_video_frame_ref.html#a1414fae176ed7bb88f3b02865014ee09">getDataSize</a>()<span class="keyword"> const</span>
<a name="l00453"></a>00453 <span class="keyword">    </span>{
<a name="l00454"></a>00454         <span class="keywordflow">return</span> m_pFrame-&gt;dataSize;
<a name="l00455"></a>00455     }
<a name="l00456"></a>00456 
<a name="l00462"></a><a class="code" href="classopenni_1_1_video_frame_ref.html#ad9301e9b6d52ffa9424cfeb881a36115">00462</a>     <span class="keyword">inline</span> <span class="keyword">const</span> <span class="keywordtype">void</span>* <a class="code" href="classopenni_1_1_video_frame_ref.html#ad9301e9b6d52ffa9424cfeb881a36115">getData</a>()<span class="keyword"> const</span>
<a name="l00463"></a>00463 <span class="keyword">    </span>{
<a name="l00464"></a>00464         <span class="keywordflow">return</span> m_pFrame-&gt;data;
<a name="l00465"></a>00465     }
<a name="l00466"></a>00466 
<a name="l00473"></a><a class="code" href="classopenni_1_1_video_frame_ref.html#a25492deb69c269488b3ec56ac50b46af">00473</a>     <span class="keyword">inline</span> <a class="code" href="namespaceopenni.html#a50658bbbf9f6e9e57aa6ebdb768fd8c2">SensorType</a> <a class="code" href="classopenni_1_1_video_frame_ref.html#a25492deb69c269488b3ec56ac50b46af">getSensorType</a>()<span class="keyword"> const</span>
<a name="l00474"></a>00474 <span class="keyword">    </span>{
<a name="l00475"></a>00475         <span class="keywordflow">return</span> (<a class="code" href="namespaceopenni.html#a50658bbbf9f6e9e57aa6ebdb768fd8c2">SensorType</a>)m_pFrame-&gt;sensorType;
<a name="l00476"></a>00476     }
<a name="l00477"></a>00477 
<a name="l00485"></a><a class="code" href="classopenni_1_1_video_frame_ref.html#a1dc7e93d0ae87f0eed6b7425b7d5e226">00485</a>     <span class="keyword">inline</span> <span class="keyword">const</span> <a class="code" href="classopenni_1_1_video_mode.html">VideoMode</a>&amp; <a class="code" href="classopenni_1_1_video_frame_ref.html#a1dc7e93d0ae87f0eed6b7425b7d5e226">getVideoMode</a>()<span class="keyword"> const</span>
<a name="l00486"></a>00486 <span class="keyword">    </span>{
<a name="l00487"></a>00487         <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="classopenni_1_1_video_mode.html">VideoMode</a>&amp;<span class="keyword">&gt;</span>(m_pFrame-&gt;videoMode);
<a name="l00488"></a>00488     }
<a name="l00489"></a>00489 
<a name="l00497"></a><a class="code" href="classopenni_1_1_video_frame_ref.html#ab35db18e8668a71ac1105044d8881c8f">00497</a>     <span class="keyword">inline</span> uint64_t <a class="code" href="classopenni_1_1_video_frame_ref.html#ab35db18e8668a71ac1105044d8881c8f">getTimestamp</a>()<span class="keyword"> const</span>
<a name="l00498"></a>00498 <span class="keyword">    </span>{
<a name="l00499"></a>00499         <span class="keywordflow">return</span> m_pFrame-&gt;timestamp;
<a name="l00500"></a>00500     }
<a name="l00501"></a>00501 
<a name="l00512"></a><a class="code" href="classopenni_1_1_video_frame_ref.html#ac5ae171717c0f0bb6850c4c2e745045c">00512</a>     <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="classopenni_1_1_video_frame_ref.html#ac5ae171717c0f0bb6850c4c2e745045c">getFrameIndex</a>()<span class="keyword"> const</span>
<a name="l00513"></a>00513 <span class="keyword">    </span>{
<a name="l00514"></a>00514         <span class="keywordflow">return</span> m_pFrame-&gt;frameIndex;
<a name="l00515"></a>00515     }
<a name="l00516"></a>00516 
<a name="l00523"></a><a class="code" href="classopenni_1_1_video_frame_ref.html#a6cfc6f11fe07f3d1a5d283b361f592da">00523</a>     <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="classopenni_1_1_video_frame_ref.html#a6cfc6f11fe07f3d1a5d283b361f592da">getWidth</a>()<span class="keyword"> const</span>
<a name="l00524"></a>00524 <span class="keyword">    </span>{
<a name="l00525"></a>00525         <span class="keywordflow">return</span> m_pFrame-&gt;width;
<a name="l00526"></a>00526     }
<a name="l00527"></a>00527 
<a name="l00533"></a><a class="code" href="classopenni_1_1_video_frame_ref.html#a683e3f4b8e327021661ad4e2715de2bc">00533</a>     <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="classopenni_1_1_video_frame_ref.html#a683e3f4b8e327021661ad4e2715de2bc">getHeight</a>()<span class="keyword"> const</span>
<a name="l00534"></a>00534 <span class="keyword">    </span>{
<a name="l00535"></a>00535         <span class="keywordflow">return</span> m_pFrame-&gt;height;
<a name="l00536"></a>00536     }
<a name="l00537"></a>00537 
<a name="l00542"></a><a class="code" href="classopenni_1_1_video_frame_ref.html#ad1f58ce43de4ce5d107aa013006d9666">00542</a>     <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="classopenni_1_1_video_frame_ref.html#ad1f58ce43de4ce5d107aa013006d9666">getCroppingEnabled</a>()<span class="keyword"> const</span>
<a name="l00543"></a>00543 <span class="keyword">    </span>{
<a name="l00544"></a>00544         <span class="keywordflow">return</span> m_pFrame-&gt;croppingEnabled == TRUE;
<a name="l00545"></a>00545     }
<a name="l00546"></a>00546 
<a name="l00551"></a><a class="code" href="classopenni_1_1_video_frame_ref.html#ad7e1230755e708988280d5920f92cd6b">00551</a>     <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="classopenni_1_1_video_frame_ref.html#ad7e1230755e708988280d5920f92cd6b">getCropOriginX</a>()<span class="keyword"> const</span>
<a name="l00552"></a>00552 <span class="keyword">    </span>{
<a name="l00553"></a>00553         <span class="keywordflow">return</span> m_pFrame-&gt;cropOriginX;
<a name="l00554"></a>00554     }
<a name="l00555"></a>00555 
<a name="l00560"></a><a class="code" href="classopenni_1_1_video_frame_ref.html#a137500fe04989b64522d81aac9f95217">00560</a>     <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="classopenni_1_1_video_frame_ref.html#a137500fe04989b64522d81aac9f95217">getCropOriginY</a>()<span class="keyword"> const</span>
<a name="l00561"></a>00561 <span class="keyword">    </span>{
<a name="l00562"></a>00562         <span class="keywordflow">return</span> m_pFrame-&gt;cropOriginY;
<a name="l00563"></a>00563     }
<a name="l00564"></a>00564 
<a name="l00570"></a><a class="code" href="classopenni_1_1_video_frame_ref.html#a73df1d5be3af74f80297aeef5c6b1655">00570</a>     <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="classopenni_1_1_video_frame_ref.html#a73df1d5be3af74f80297aeef5c6b1655">getStrideInBytes</a>()<span class="keyword"> const</span>
<a name="l00571"></a>00571 <span class="keyword">    </span>{
<a name="l00572"></a>00572         <span class="keywordflow">return</span> m_pFrame-&gt;stride;
<a name="l00573"></a>00573     }
<a name="l00574"></a>00574 
<a name="l00578"></a><a class="code" href="classopenni_1_1_video_frame_ref.html#a6b426ef8a97df059c1a35906c7f154d5">00578</a>     <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="classopenni_1_1_video_frame_ref.html#a6b426ef8a97df059c1a35906c7f154d5">isValid</a>()<span class="keyword"> const</span>
<a name="l00579"></a>00579 <span class="keyword">    </span>{
<a name="l00580"></a>00580         <span class="keywordflow">return</span> m_pFrame != NULL;
<a name="l00581"></a>00581     }
<a name="l00582"></a>00582 
<a name="l00587"></a><a class="code" href="classopenni_1_1_video_frame_ref.html#aab68b2fe1564d62d739f09edca037ae3">00587</a>     <span class="keywordtype">void</span> <a class="code" href="classopenni_1_1_video_frame_ref.html#aab68b2fe1564d62d739f09edca037ae3">release</a>()
<a name="l00588"></a>00588     {
<a name="l00589"></a>00589         <span class="keywordflow">if</span> (m_pFrame != NULL)
<a name="l00590"></a>00590         {
<a name="l00591"></a>00591             oniFrameRelease(m_pFrame);
<a name="l00592"></a>00592             m_pFrame = NULL;
<a name="l00593"></a>00593         }
<a name="l00594"></a>00594     }
<a name="l00595"></a>00595 
<a name="l00597"></a>00597     <span class="keywordtype">void</span> _setFrame(OniFrame* pFrame)
<a name="l00598"></a>00598     {
<a name="l00599"></a>00599         setReference(pFrame);
<a name="l00600"></a>00600         <span class="keywordflow">if</span> (pFrame != NULL)
<a name="l00601"></a>00601         {
<a name="l00602"></a>00602             oniFrameAddRef(pFrame);
<a name="l00603"></a>00603         }
<a name="l00604"></a>00604     }
<a name="l00605"></a>00605 
<a name="l00607"></a>00607     OniFrame* _getFrame()
<a name="l00608"></a>00608     {
<a name="l00609"></a>00609         <span class="keywordflow">return</span> m_pFrame;
<a name="l00610"></a>00610     }
<a name="l00611"></a>00611 
<a name="l00612"></a>00612 <span class="keyword">private</span>:
<a name="l00613"></a><a class="code" href="classopenni_1_1_video_frame_ref.html#a4fd1028f691947151ea08e0db214f01c">00613</a>     <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classopenni_1_1_video_stream.html">VideoStream</a>;
<a name="l00614"></a>00614     <span class="keyword">inline</span> <span class="keywordtype">void</span> setReference(OniFrame* pFrame)
<a name="l00615"></a>00615     {
<a name="l00616"></a>00616         <span class="comment">// Initial - don&#39;t addref. This is the reference from OpenNI</span>
<a name="l00617"></a>00617         <a class="code" href="classopenni_1_1_video_frame_ref.html#aab68b2fe1564d62d739f09edca037ae3">release</a>();
<a name="l00618"></a>00618         m_pFrame = pFrame;
<a name="l00619"></a>00619     }
<a name="l00620"></a>00620 
<a name="l00621"></a>00621     OniFrame* m_pFrame; <span class="comment">// const!!?</span>
<a name="l00622"></a>00622 };
<a name="l00623"></a>00623 
<a name="l00645"></a><a class="code" href="classopenni_1_1_video_stream.html">00645</a> <span class="keyword">class </span><a class="code" href="classopenni_1_1_video_stream.html">VideoStream</a>
<a name="l00646"></a>00646 {
<a name="l00647"></a>00647 <span class="keyword">public</span>:
<a name="l00655"></a><a class="code" href="classopenni_1_1_video_stream_1_1_new_frame_listener.html">00655</a>     <span class="keyword">class </span><a class="code" href="classopenni_1_1_video_stream_1_1_new_frame_listener.html">NewFrameListener</a>
<a name="l00656"></a>00656     {
<a name="l00657"></a>00657     <span class="keyword">public</span>:
<a name="l00661"></a><a class="code" href="classopenni_1_1_video_stream_1_1_new_frame_listener.html#a73fb0101631bc1da7eeae056d73d78fc">00661</a>         <a class="code" href="classopenni_1_1_video_stream_1_1_new_frame_listener.html#a73fb0101631bc1da7eeae056d73d78fc">NewFrameListener</a>() : m_callbackHandle(NULL)
<a name="l00662"></a>00662         {
<a name="l00663"></a>00663         }
<a name="l00664"></a>00664 
<a name="l00665"></a><a class="code" href="classopenni_1_1_video_stream_1_1_new_frame_listener.html#ab9edd2ad37826a0c45a2379bfbec8456">00665</a>         <span class="keyword">virtual</span> <a class="code" href="classopenni_1_1_video_stream_1_1_new_frame_listener.html#ab9edd2ad37826a0c45a2379bfbec8456">~NewFrameListener</a>()
<a name="l00666"></a>00666         {
<a name="l00667"></a>00667         }
<a name="l00668"></a>00668 
<a name="l00672"></a>00672         <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classopenni_1_1_video_stream_1_1_new_frame_listener.html#a5f6a771b3f48e2217d036bd1c6b520a4">onNewFrame</a>(<a class="code" href="classopenni_1_1_video_stream.html">VideoStream</a>&amp;) = 0;
<a name="l00673"></a>00673 
<a name="l00674"></a>00674     <span class="keyword">private</span>:
<a name="l00675"></a><a class="code" href="classopenni_1_1_video_stream_1_1_new_frame_listener.html#a4fd1028f691947151ea08e0db214f01c">00675</a>         <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classopenni_1_1_video_stream.html">VideoStream</a>;
<a name="l00676"></a>00676 
<a name="l00677"></a>00677         <span class="keyword">static</span> <span class="keywordtype">void</span> ONI_CALLBACK_TYPE callback(OniStreamHandle streamHandle, <span class="keywordtype">void</span>* pCookie)
<a name="l00678"></a>00678         {
<a name="l00679"></a>00679             <a class="code" href="classopenni_1_1_video_stream_1_1_new_frame_listener.html">NewFrameListener</a>* pListener = (<a class="code" href="classopenni_1_1_video_stream_1_1_new_frame_listener.html">NewFrameListener</a>*)pCookie;
<a name="l00680"></a>00680             <a class="code" href="classopenni_1_1_video_stream.html">VideoStream</a> stream;
<a name="l00681"></a>00681             stream._setHandle(streamHandle);
<a name="l00682"></a>00682             pListener-&gt;<a class="code" href="classopenni_1_1_video_stream_1_1_new_frame_listener.html#a5f6a771b3f48e2217d036bd1c6b520a4">onNewFrame</a>(stream);
<a name="l00683"></a>00683             stream._setHandle(NULL);
<a name="l00684"></a>00684         }
<a name="l00685"></a>00685         OniCallbackHandle m_callbackHandle;
<a name="l00686"></a>00686     };
<a name="l00687"></a>00687 
<a name="l00688"></a><a class="code" href="classopenni_1_1_video_stream_1_1_frame_allocator.html">00688</a>     <span class="keyword">class </span><a class="code" href="classopenni_1_1_video_stream_1_1_frame_allocator.html">FrameAllocator</a>
<a name="l00689"></a>00689     {
<a name="l00690"></a>00690     <span class="keyword">public</span>:
<a name="l00691"></a><a class="code" href="classopenni_1_1_video_stream_1_1_frame_allocator.html#a39da40d628ef970086d45c7886793c7f">00691</a>         <span class="keyword">virtual</span> <a class="code" href="classopenni_1_1_video_stream_1_1_frame_allocator.html#a39da40d628ef970086d45c7886793c7f">~FrameAllocator</a>() {}
<a name="l00692"></a>00692         <span class="keyword">virtual</span> <span class="keywordtype">void</span>* <a class="code" href="classopenni_1_1_video_stream_1_1_frame_allocator.html#a87d1de1d474d7ebf0c17830e26b685ce">allocateFrameBuffer</a>(<span class="keywordtype">int</span> size) = 0;
<a name="l00693"></a>00693         <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classopenni_1_1_video_stream_1_1_frame_allocator.html#aaa309f4045027b32efe305f67403dc9b">freeFrameBuffer</a>(<span class="keywordtype">void</span>* data) = 0;
<a name="l00694"></a>00694 
<a name="l00695"></a>00695     <span class="keyword">private</span>:
<a name="l00696"></a><a class="code" href="classopenni_1_1_video_stream_1_1_frame_allocator.html#a4fd1028f691947151ea08e0db214f01c">00696</a>         <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classopenni_1_1_video_stream.html">VideoStream</a>;
<a name="l00697"></a>00697 
<a name="l00698"></a>00698         <span class="keyword">static</span> <span class="keywordtype">void</span>* ONI_CALLBACK_TYPE allocateFrameBufferCallback(<span class="keywordtype">int</span> size, <span class="keywordtype">void</span>* pCookie)
<a name="l00699"></a>00699         {
<a name="l00700"></a>00700             <a class="code" href="classopenni_1_1_video_stream_1_1_frame_allocator.html">FrameAllocator</a>* pThis = (<a class="code" href="classopenni_1_1_video_stream_1_1_frame_allocator.html">FrameAllocator</a>*)pCookie;
<a name="l00701"></a>00701             <span class="keywordflow">return</span> pThis-&gt;<a class="code" href="classopenni_1_1_video_stream_1_1_frame_allocator.html#a87d1de1d474d7ebf0c17830e26b685ce">allocateFrameBuffer</a>(size);
<a name="l00702"></a>00702         }
<a name="l00703"></a>00703 
<a name="l00704"></a>00704         <span class="keyword">static</span> <span class="keywordtype">void</span> ONI_CALLBACK_TYPE freeFrameBufferCallback(<span class="keywordtype">void</span>* data, <span class="keywordtype">void</span>* pCookie)
<a name="l00705"></a>00705         {
<a name="l00706"></a>00706             <a class="code" href="classopenni_1_1_video_stream_1_1_frame_allocator.html">FrameAllocator</a>* pThis = (<a class="code" href="classopenni_1_1_video_stream_1_1_frame_allocator.html">FrameAllocator</a>*)pCookie;
<a name="l00707"></a>00707             pThis-&gt;<a class="code" href="classopenni_1_1_video_stream_1_1_frame_allocator.html#aaa309f4045027b32efe305f67403dc9b">freeFrameBuffer</a>(data);
<a name="l00708"></a>00708         }
<a name="l00709"></a>00709     };
<a name="l00710"></a>00710 
<a name="l00715"></a><a class="code" href="classopenni_1_1_video_stream.html#ad9e23fcc619535149c8833eea9fc2918">00715</a>     <a class="code" href="classopenni_1_1_video_stream.html#ad9e23fcc619535149c8833eea9fc2918">VideoStream</a>() : m_stream(NULL), m_sensorInfo(), m_pCameraSettings(NULL), m_isOwner(true)
<a name="l00716"></a>00716     {}
<a name="l00717"></a>00717 
<a name="l00722"></a><a class="code" href="classopenni_1_1_video_stream.html#acf94ebb74dc4171be8e52d891ea60823">00722</a>     <span class="keyword">explicit</span> <a class="code" href="classopenni_1_1_video_stream.html#ad9e23fcc619535149c8833eea9fc2918">VideoStream</a>(OniStreamHandle handle) : m_stream(NULL), m_sensorInfo(), m_pCameraSettings(NULL), m_isOwner(false)
<a name="l00723"></a>00723     {
<a name="l00724"></a>00724         _setHandle(handle);
<a name="l00725"></a>00725     }
<a name="l00726"></a>00726 
<a name="l00731"></a><a class="code" href="classopenni_1_1_video_stream.html#a063149ee3a46d499af3819565156c818">00731</a>     <a class="code" href="classopenni_1_1_video_stream.html#a063149ee3a46d499af3819565156c818">~VideoStream</a>()
<a name="l00732"></a>00732     {
<a name="l00733"></a>00733         <a class="code" href="classopenni_1_1_video_stream.html#ae10d69b147fe098c3dc9cb0bfde415ed">destroy</a>();
<a name="l00734"></a>00734     }
<a name="l00735"></a>00735 
<a name="l00740"></a><a class="code" href="classopenni_1_1_video_stream.html#ae187f95f14461215fed421a3d6a66625">00740</a>     <span class="keywordtype">bool</span> <a class="code" href="classopenni_1_1_video_stream.html#ae187f95f14461215fed421a3d6a66625">isValid</a>()<span class="keyword"> const</span>
<a name="l00741"></a>00741 <span class="keyword">    </span>{
<a name="l00742"></a>00742         <span class="keywordflow">return</span> m_stream != NULL;
<a name="l00743"></a>00743     }
<a name="l00744"></a>00744 
<a name="l00754"></a>00754     <span class="keyword">inline</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_video_stream.html#a171b2f72e383903ee7787697b26017ae">create</a>(<span class="keyword">const</span> <a class="code" href="classopenni_1_1_device.html">Device</a>&amp; device, <a class="code" href="namespaceopenni.html#a50658bbbf9f6e9e57aa6ebdb768fd8c2">SensorType</a> sensorType);
<a name="l00755"></a>00755 
<a name="l00761"></a>00761     <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classopenni_1_1_video_stream.html#ae10d69b147fe098c3dc9cb0bfde415ed">destroy</a>();
<a name="l00762"></a>00762 
<a name="l00771"></a><a class="code" href="classopenni_1_1_video_stream.html#aede2670a0035d933929d7c7a9356edc5">00771</a>     <span class="keyword">const</span> <a class="code" href="classopenni_1_1_sensor_info.html">SensorInfo</a>&amp; <a class="code" href="classopenni_1_1_video_stream.html#aede2670a0035d933929d7c7a9356edc5">getSensorInfo</a>()<span class="keyword"> const</span>
<a name="l00772"></a>00772 <span class="keyword">    </span>{
<a name="l00773"></a>00773         <span class="keywordflow">return</span> m_sensorInfo;
<a name="l00774"></a>00774     }
<a name="l00775"></a>00775 
<a name="l00779"></a><a class="code" href="classopenni_1_1_video_stream.html#a090d4873ab30dac86d29005831ffbd77">00779</a>     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_video_stream.html#a090d4873ab30dac86d29005831ffbd77">start</a>()
<a name="l00780"></a>00780     {
<a name="l00781"></a>00781         <span class="keywordflow">if</span> (!<a class="code" href="classopenni_1_1_video_stream.html#ae187f95f14461215fed421a3d6a66625">isValid</a>())
<a name="l00782"></a>00782         {
<a name="l00783"></a>00783             <span class="keywordflow">return</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333a3b91bb9ad4a7c004eafb21f10de74346">STATUS_ERROR</a>;
<a name="l00784"></a>00784         }
<a name="l00785"></a>00785 
<a name="l00786"></a>00786         <span class="keywordflow">return</span> (<a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a>)oniStreamStart(m_stream);
<a name="l00787"></a>00787     }
<a name="l00788"></a>00788 
<a name="l00792"></a><a class="code" href="classopenni_1_1_video_stream.html#a55fc279dd603a694ee5f5ec074592dce">00792</a>     <span class="keywordtype">void</span> <a class="code" href="classopenni_1_1_video_stream.html#a55fc279dd603a694ee5f5ec074592dce">stop</a>()
<a name="l00793"></a>00793     {
<a name="l00794"></a>00794         <span class="keywordflow">if</span> (!<a class="code" href="classopenni_1_1_video_stream.html#ae187f95f14461215fed421a3d6a66625">isValid</a>())
<a name="l00795"></a>00795         {
<a name="l00796"></a>00796             <span class="keywordflow">return</span>;
<a name="l00797"></a>00797         }
<a name="l00798"></a>00798 
<a name="l00799"></a>00799         oniStreamStop(m_stream);
<a name="l00800"></a>00800     }
<a name="l00801"></a>00801 
<a name="l00812"></a><a class="code" href="classopenni_1_1_video_stream.html#a1610b8aaa89e0f39a607b9780ba9ab77">00812</a>     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_video_stream.html#a1610b8aaa89e0f39a607b9780ba9ab77">readFrame</a>(<a class="code" href="classopenni_1_1_video_frame_ref.html">VideoFrameRef</a>* pFrame)
<a name="l00813"></a>00813     {
<a name="l00814"></a>00814         <span class="keywordflow">if</span> (!<a class="code" href="classopenni_1_1_video_stream.html#ae187f95f14461215fed421a3d6a66625">isValid</a>())
<a name="l00815"></a>00815         {
<a name="l00816"></a>00816             <span class="keywordflow">return</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333a3b91bb9ad4a7c004eafb21f10de74346">STATUS_ERROR</a>;
<a name="l00817"></a>00817         }
<a name="l00818"></a>00818 
<a name="l00819"></a>00819         OniFrame* pOniFrame;
<a name="l00820"></a>00820         <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> rc = (<a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a>)oniStreamReadFrame(m_stream, &amp;pOniFrame);
<a name="l00821"></a>00821 
<a name="l00822"></a>00822         pFrame-&gt;setReference(pOniFrame);
<a name="l00823"></a>00823         <span class="keywordflow">return</span> rc;
<a name="l00824"></a>00824     }
<a name="l00825"></a>00825 
<a name="l00833"></a><a class="code" href="classopenni_1_1_video_stream.html#a72da62972b0f042d2e4d6b4e1bf3605a">00833</a>     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_video_stream.html#a72da62972b0f042d2e4d6b4e1bf3605a">addNewFrameListener</a>(<a class="code" href="classopenni_1_1_video_stream_1_1_new_frame_listener.html">NewFrameListener</a>* pListener)
<a name="l00834"></a>00834     {
<a name="l00835"></a>00835         <span class="keywordflow">if</span> (!<a class="code" href="classopenni_1_1_video_stream.html#ae187f95f14461215fed421a3d6a66625">isValid</a>())
<a name="l00836"></a>00836         {
<a name="l00837"></a>00837             <span class="keywordflow">return</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333a3b91bb9ad4a7c004eafb21f10de74346">STATUS_ERROR</a>;
<a name="l00838"></a>00838         }
<a name="l00839"></a>00839 
<a name="l00840"></a>00840         <span class="keywordflow">return</span> (<a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a>)oniStreamRegisterNewFrameCallback(m_stream, pListener-&gt;callback, pListener, &amp;pListener-&gt;m_callbackHandle);
<a name="l00841"></a>00841     }
<a name="l00842"></a>00842 
<a name="l00847"></a><a class="code" href="classopenni_1_1_video_stream.html#a4842ff4f5b1be4c668f0c616b98aaa92">00847</a>     <span class="keywordtype">void</span> <a class="code" href="classopenni_1_1_video_stream.html#a4842ff4f5b1be4c668f0c616b98aaa92">removeNewFrameListener</a>(<a class="code" href="classopenni_1_1_video_stream_1_1_new_frame_listener.html">NewFrameListener</a>* pListener)
<a name="l00848"></a>00848     {
<a name="l00849"></a>00849         <span class="keywordflow">if</span> (!<a class="code" href="classopenni_1_1_video_stream.html#ae187f95f14461215fed421a3d6a66625">isValid</a>())
<a name="l00850"></a>00850         {
<a name="l00851"></a>00851             <span class="keywordflow">return</span>;
<a name="l00852"></a>00852         }
<a name="l00853"></a>00853 
<a name="l00854"></a>00854         oniStreamUnregisterNewFrameCallback(m_stream, pListener-&gt;m_callbackHandle);
<a name="l00855"></a>00855         pListener-&gt;m_callbackHandle = NULL;
<a name="l00856"></a>00856     }
<a name="l00857"></a>00857 
<a name="l00863"></a><a class="code" href="classopenni_1_1_video_stream.html#a627e6d5b3ddf2032693275780913d1ee">00863</a>     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_video_stream.html#a627e6d5b3ddf2032693275780913d1ee">setFrameBuffersAllocator</a>(<a class="code" href="classopenni_1_1_video_stream_1_1_frame_allocator.html">FrameAllocator</a>* pAllocator)
<a name="l00864"></a>00864     {
<a name="l00865"></a>00865         <span class="keywordflow">if</span> (!<a class="code" href="classopenni_1_1_video_stream.html#ae187f95f14461215fed421a3d6a66625">isValid</a>())
<a name="l00866"></a>00866         {
<a name="l00867"></a>00867             <span class="keywordflow">return</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333a3b91bb9ad4a7c004eafb21f10de74346">STATUS_ERROR</a>;
<a name="l00868"></a>00868         }
<a name="l00869"></a>00869 
<a name="l00870"></a>00870         <span class="keywordflow">if</span> (pAllocator == NULL)
<a name="l00871"></a>00871         {
<a name="l00872"></a>00872             <span class="keywordflow">return</span> (<a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a>)oniStreamSetFrameBuffersAllocator(m_stream, NULL, NULL, NULL);
<a name="l00873"></a>00873         }
<a name="l00874"></a>00874         <span class="keywordflow">else</span>
<a name="l00875"></a>00875         {
<a name="l00876"></a>00876             <span class="keywordflow">return</span> (<a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a>)oniStreamSetFrameBuffersAllocator(m_stream, pAllocator-&gt;allocateFrameBufferCallback, pAllocator-&gt;freeFrameBufferCallback, pAllocator);
<a name="l00877"></a>00877         }
<a name="l00878"></a>00878     }
<a name="l00879"></a>00879 
<a name="l00884"></a>00884     OniStreamHandle _getHandle()<span class="keyword"> const</span>
<a name="l00885"></a>00885 <span class="keyword">    </span>{
<a name="l00886"></a>00886         <span class="keywordflow">return</span> m_stream;
<a name="l00887"></a>00887     }
<a name="l00888"></a>00888 
<a name="l00893"></a><a class="code" href="classopenni_1_1_video_stream.html#a029f6df9d50d1f125c0ec2c7f2b6574f">00893</a>     <a class="code" href="classopenni_1_1_camera_settings.html">CameraSettings</a>* <a class="code" href="classopenni_1_1_video_stream.html#a029f6df9d50d1f125c0ec2c7f2b6574f">getCameraSettings</a>() {<span class="keywordflow">return</span> m_pCameraSettings;}
<a name="l00894"></a>00894 
<a name="l00905"></a><a class="code" href="classopenni_1_1_video_stream.html#adc8197276c332ce2afcf322de68e0e04">00905</a>     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_video_stream.html#adc8197276c332ce2afcf322de68e0e04">getProperty</a>(<span class="keywordtype">int</span> propertyId, <span class="keywordtype">void</span>* data, <span class="keywordtype">int</span>* dataSize)<span class="keyword"> const</span>
<a name="l00906"></a>00906 <span class="keyword">    </span>{
<a name="l00907"></a>00907         <span class="keywordflow">if</span> (!<a class="code" href="classopenni_1_1_video_stream.html#ae187f95f14461215fed421a3d6a66625">isValid</a>())
<a name="l00908"></a>00908         {
<a name="l00909"></a>00909             <span class="keywordflow">return</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333a3b91bb9ad4a7c004eafb21f10de74346">STATUS_ERROR</a>;
<a name="l00910"></a>00910         }
<a name="l00911"></a>00911 
<a name="l00912"></a>00912         <span class="keywordflow">return</span> (<a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a>)oniStreamGetProperty(m_stream, propertyId, data, dataSize);
<a name="l00913"></a>00913     }
<a name="l00914"></a>00914 
<a name="l00925"></a><a class="code" href="classopenni_1_1_video_stream.html#a72c23221468529cc97c6bde25fccce2c">00925</a>     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_video_stream.html#a72c23221468529cc97c6bde25fccce2c">setProperty</a>(<span class="keywordtype">int</span> propertyId, <span class="keyword">const</span> <span class="keywordtype">void</span>* data, <span class="keywordtype">int</span> dataSize)
<a name="l00926"></a>00926     {
<a name="l00927"></a>00927         <span class="keywordflow">if</span> (!<a class="code" href="classopenni_1_1_video_stream.html#ae187f95f14461215fed421a3d6a66625">isValid</a>())
<a name="l00928"></a>00928         {
<a name="l00929"></a>00929             <span class="keywordflow">return</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333a3b91bb9ad4a7c004eafb21f10de74346">STATUS_ERROR</a>;
<a name="l00930"></a>00930         }
<a name="l00931"></a>00931 
<a name="l00932"></a>00932         <span class="keywordflow">return</span> (<a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a>)oniStreamSetProperty(m_stream, propertyId, data, dataSize);
<a name="l00933"></a>00933     }
<a name="l00934"></a>00934 
<a name="l00941"></a><a class="code" href="classopenni_1_1_video_stream.html#a8fb28ca1b61d1ecabd28d08633e927ab">00941</a>     <a class="code" href="classopenni_1_1_video_mode.html">VideoMode</a> <a class="code" href="classopenni_1_1_video_stream.html#a8fb28ca1b61d1ecabd28d08633e927ab">getVideoMode</a>()<span class="keyword"> const</span>
<a name="l00942"></a>00942 <span class="keyword">    </span>{
<a name="l00943"></a>00943         <a class="code" href="classopenni_1_1_video_mode.html">VideoMode</a> videoMode;
<a name="l00944"></a>00944         getProperty&lt;OniVideoMode&gt;(STREAM_PROPERTY_VIDEO_MODE, <span class="keyword">static_cast&lt;</span>OniVideoMode*<span class="keyword">&gt;</span>(&amp;videoMode));
<a name="l00945"></a>00945         <span class="keywordflow">return</span> videoMode;
<a name="l00946"></a>00946     }
<a name="l00947"></a>00947 
<a name="l00956"></a><a class="code" href="classopenni_1_1_video_stream.html#a542e98aecfcdfc5c38079d80960af5d2">00956</a>     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_video_stream.html#a542e98aecfcdfc5c38079d80960af5d2">setVideoMode</a>(<span class="keyword">const</span> <a class="code" href="classopenni_1_1_video_mode.html">VideoMode</a>&amp; videoMode)
<a name="l00957"></a>00957     {
<a name="l00958"></a>00958         <span class="keywordflow">return</span> setProperty&lt;OniVideoMode&gt;(STREAM_PROPERTY_VIDEO_MODE, <span class="keyword">static_cast&lt;</span><span class="keyword">const </span>OniVideoMode&amp;<span class="keyword">&gt;</span>(videoMode));
<a name="l00959"></a>00959     }
<a name="l00960"></a>00960 
<a name="l00966"></a><a class="code" href="classopenni_1_1_video_stream.html#a28120b50c843e3062a756c92ed485281">00966</a>     <span class="keywordtype">int</span> <a class="code" href="classopenni_1_1_video_stream.html#a28120b50c843e3062a756c92ed485281">getMaxPixelValue</a>()<span class="keyword"> const</span>
<a name="l00967"></a>00967 <span class="keyword">    </span>{
<a name="l00968"></a>00968         <span class="keywordtype">int</span> maxValue;
<a name="l00969"></a>00969         <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> rc = getProperty&lt;int&gt;(STREAM_PROPERTY_MAX_VALUE, &amp;maxValue);
<a name="l00970"></a>00970         <span class="keywordflow">if</span> (rc != <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333ac4a1d7871ca526614cc705cd34b67367">STATUS_OK</a>)
<a name="l00971"></a>00971         {
<a name="l00972"></a>00972             <span class="keywordflow">return</span> 0;
<a name="l00973"></a>00973         }
<a name="l00974"></a>00974         <span class="keywordflow">return</span> maxValue;
<a name="l00975"></a>00975     }
<a name="l00976"></a>00976 
<a name="l00982"></a><a class="code" href="classopenni_1_1_video_stream.html#a00fb26ce13b2509eb8f9a6d0290697b9">00982</a>     <span class="keywordtype">int</span> <a class="code" href="classopenni_1_1_video_stream.html#a00fb26ce13b2509eb8f9a6d0290697b9">getMinPixelValue</a>()<span class="keyword"> const</span>
<a name="l00983"></a>00983 <span class="keyword">    </span>{
<a name="l00984"></a>00984         <span class="keywordtype">int</span> minValue;
<a name="l00985"></a>00985         <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> rc = getProperty&lt;int&gt;(STREAM_PROPERTY_MIN_VALUE, &amp;minValue);
<a name="l00986"></a>00986         <span class="keywordflow">if</span> (rc != <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333ac4a1d7871ca526614cc705cd34b67367">STATUS_OK</a>)
<a name="l00987"></a>00987         {
<a name="l00988"></a>00988             <span class="keywordflow">return</span> 0;
<a name="l00989"></a>00989         }
<a name="l00990"></a>00990         <span class="keywordflow">return</span> minValue;
<a name="l00991"></a>00991     }
<a name="l00992"></a>00992 
<a name="l00997"></a><a class="code" href="classopenni_1_1_video_stream.html#a05345182b0d9d8b967a9575980a5523e">00997</a>     <span class="keywordtype">bool</span> <a class="code" href="classopenni_1_1_video_stream.html#a05345182b0d9d8b967a9575980a5523e">isCroppingSupported</a>()<span class="keyword"> const</span>
<a name="l00998"></a>00998 <span class="keyword">    </span>{
<a name="l00999"></a>00999         <span class="keywordflow">return</span> <a class="code" href="classopenni_1_1_video_stream.html#acd1b875ad4fe267deed85f540e33c30d">isPropertySupported</a>(STREAM_PROPERTY_CROPPING);
<a name="l01000"></a>01000     }
<a name="l01001"></a>01001 
<a name="l01010"></a><a class="code" href="classopenni_1_1_video_stream.html#aa3f5d33e2d3bdf0416a427617b8cb180">01010</a>     <span class="keywordtype">bool</span> <a class="code" href="classopenni_1_1_video_stream.html#aa3f5d33e2d3bdf0416a427617b8cb180">getCropping</a>(<span class="keywordtype">int</span>* pOriginX, <span class="keywordtype">int</span>* pOriginY, <span class="keywordtype">int</span>* pWidth, <span class="keywordtype">int</span>* pHeight)<span class="keyword"> const</span>
<a name="l01011"></a>01011 <span class="keyword">    </span>{
<a name="l01012"></a>01012         OniCropping cropping;
<a name="l01013"></a>01013         <span class="keywordtype">bool</span> enabled = <span class="keyword">false</span>;
<a name="l01014"></a>01014 
<a name="l01015"></a>01015         <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> rc = getProperty&lt;OniCropping&gt;(STREAM_PROPERTY_CROPPING, &amp;cropping);
<a name="l01016"></a>01016 
<a name="l01017"></a>01017         <span class="keywordflow">if</span> (rc == <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333ac4a1d7871ca526614cc705cd34b67367">STATUS_OK</a>)
<a name="l01018"></a>01018         {
<a name="l01019"></a>01019             *pOriginX = cropping.originX;
<a name="l01020"></a>01020             *pOriginY = cropping.originY;
<a name="l01021"></a>01021             *pWidth = cropping.width;
<a name="l01022"></a>01022             *pHeight = cropping.height;
<a name="l01023"></a>01023             enabled = (cropping.enabled == TRUE);
<a name="l01024"></a>01024         }
<a name="l01025"></a>01025 
<a name="l01026"></a>01026         <span class="keywordflow">return</span> enabled;
<a name="l01027"></a>01027     }
<a name="l01028"></a>01028 
<a name="l01038"></a><a class="code" href="classopenni_1_1_video_stream.html#a5b3bc3ef4e531496f875fdbf6604a157">01038</a>     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_video_stream.html#a5b3bc3ef4e531496f875fdbf6604a157">setCropping</a>(<span class="keywordtype">int</span> originX, <span class="keywordtype">int</span> originY, <span class="keywordtype">int</span> width, <span class="keywordtype">int</span> height)
<a name="l01039"></a>01039     {
<a name="l01040"></a>01040         OniCropping cropping;
<a name="l01041"></a>01041         cropping.enabled = <span class="keyword">true</span>;
<a name="l01042"></a>01042         cropping.originX = originX;
<a name="l01043"></a>01043         cropping.originY = originY;
<a name="l01044"></a>01044         cropping.width = width;
<a name="l01045"></a>01045         cropping.height = height;
<a name="l01046"></a>01046         <span class="keywordflow">return</span> setProperty&lt;OniCropping&gt;(STREAM_PROPERTY_CROPPING, cropping);
<a name="l01047"></a>01047     }
<a name="l01048"></a>01048 
<a name="l01053"></a><a class="code" href="classopenni_1_1_video_stream.html#ae3f8fc2698c14d85667d35d358d4643c">01053</a>     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_video_stream.html#ae3f8fc2698c14d85667d35d358d4643c">resetCropping</a>()
<a name="l01054"></a>01054     {
<a name="l01055"></a>01055         OniCropping cropping;
<a name="l01056"></a>01056         cropping.enabled = <span class="keyword">false</span>;
<a name="l01057"></a>01057         <span class="keywordflow">return</span> setProperty&lt;OniCropping&gt;(STREAM_PROPERTY_CROPPING, cropping);
<a name="l01058"></a>01058     }
<a name="l01059"></a>01059 
<a name="l01064"></a><a class="code" href="classopenni_1_1_video_stream.html#aad5a1e2f4eeba20896d2b9ef04a52e7a">01064</a>     <span class="keywordtype">bool</span> <a class="code" href="classopenni_1_1_video_stream.html#aad5a1e2f4eeba20896d2b9ef04a52e7a">getMirroringEnabled</a>()<span class="keyword"> const</span>
<a name="l01065"></a>01065 <span class="keyword">    </span>{
<a name="l01066"></a>01066         OniBool enabled;
<a name="l01067"></a>01067         <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> rc = getProperty&lt;OniBool&gt;(STREAM_PROPERTY_MIRRORING, &amp;enabled);
<a name="l01068"></a>01068         <span class="keywordflow">if</span> (rc != <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333ac4a1d7871ca526614cc705cd34b67367">STATUS_OK</a>)
<a name="l01069"></a>01069         {
<a name="l01070"></a>01070             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01071"></a>01071         }
<a name="l01072"></a>01072         <span class="keywordflow">return</span> enabled == TRUE;
<a name="l01073"></a>01073     }
<a name="l01074"></a>01074 
<a name="l01080"></a><a class="code" href="classopenni_1_1_video_stream.html#af34b31b62f0ae9d1772b6ff85ef0bae5">01080</a>     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_video_stream.html#af34b31b62f0ae9d1772b6ff85ef0bae5">setMirroringEnabled</a>(<span class="keywordtype">bool</span> isEnabled)
<a name="l01081"></a>01081     {
<a name="l01082"></a>01082         <span class="keywordflow">return</span> setProperty&lt;OniBool&gt;(STREAM_PROPERTY_MIRRORING, isEnabled ? TRUE : FALSE);
<a name="l01083"></a>01083     }
<a name="l01084"></a>01084 
<a name="l01089"></a><a class="code" href="classopenni_1_1_video_stream.html#a9f8887507198057129befc8f448c7cb0">01089</a>     <span class="keywordtype">float</span> <a class="code" href="classopenni_1_1_video_stream.html#a9f8887507198057129befc8f448c7cb0">getHorizontalFieldOfView</a>()<span class="keyword"> const</span>
<a name="l01090"></a>01090 <span class="keyword">    </span>{
<a name="l01091"></a>01091         <span class="keywordtype">float</span> horizontal = 0;
<a name="l01092"></a>01092         getProperty&lt;float&gt;(STREAM_PROPERTY_HORIZONTAL_FOV, &amp;horizontal);
<a name="l01093"></a>01093         <span class="keywordflow">return</span> horizontal;
<a name="l01094"></a>01094     }
<a name="l01095"></a>01095 
<a name="l01100"></a><a class="code" href="classopenni_1_1_video_stream.html#a804549dfa750664943368ee6b304da31">01100</a>     <span class="keywordtype">float</span> <a class="code" href="classopenni_1_1_video_stream.html#a804549dfa750664943368ee6b304da31">getVerticalFieldOfView</a>()<span class="keyword"> const</span>
<a name="l01101"></a>01101 <span class="keyword">    </span>{
<a name="l01102"></a>01102         <span class="keywordtype">float</span> vertical = 0;
<a name="l01103"></a>01103         getProperty&lt;float&gt;(STREAM_PROPERTY_VERTICAL_FOV, &amp;vertical);
<a name="l01104"></a>01104         <span class="keywordflow">return</span> vertical;
<a name="l01105"></a>01105     }
<a name="l01106"></a>01106 
<a name="l01116"></a>01116     <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l01117"></a><a class="code" href="classopenni_1_1_video_stream.html#a915f6710f0818b24996daab96c5124ce">01117</a>     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_video_stream.html#a72c23221468529cc97c6bde25fccce2c">setProperty</a>(<span class="keywordtype">int</span> propertyId, <span class="keyword">const</span> T&amp; value)
<a name="l01118"></a>01118     {
<a name="l01119"></a>01119         <span class="keywordflow">return</span> <a class="code" href="classopenni_1_1_video_stream.html#a72c23221468529cc97c6bde25fccce2c">setProperty</a>(propertyId, &amp;value, <span class="keyword">sizeof</span>(T));
<a name="l01120"></a>01120     }
<a name="l01121"></a>01121 
<a name="l01131"></a>01131     <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l01132"></a><a class="code" href="classopenni_1_1_video_stream.html#aa0916a3aa5ae7afa1a360c2ce4d642e8">01132</a>     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_video_stream.html#adc8197276c332ce2afcf322de68e0e04">getProperty</a>(<span class="keywordtype">int</span> propertyId, T* value)<span class="keyword"> const</span>
<a name="l01133"></a>01133 <span class="keyword">    </span>{
<a name="l01134"></a>01134         <span class="keywordtype">int</span> size = <span class="keyword">sizeof</span>(T);
<a name="l01135"></a>01135         <span class="keywordflow">return</span> <a class="code" href="classopenni_1_1_video_stream.html#adc8197276c332ce2afcf322de68e0e04">getProperty</a>(propertyId, value, &amp;size);
<a name="l01136"></a>01136     }
<a name="l01137"></a>01137 
<a name="l01143"></a><a class="code" href="classopenni_1_1_video_stream.html#acd1b875ad4fe267deed85f540e33c30d">01143</a>     <span class="keywordtype">bool</span> <a class="code" href="classopenni_1_1_video_stream.html#acd1b875ad4fe267deed85f540e33c30d">isPropertySupported</a>(<span class="keywordtype">int</span> propertyId)<span class="keyword"> const</span>
<a name="l01144"></a>01144 <span class="keyword">    </span>{
<a name="l01145"></a>01145         <span class="keywordflow">if</span> (!<a class="code" href="classopenni_1_1_video_stream.html#ae187f95f14461215fed421a3d6a66625">isValid</a>())
<a name="l01146"></a>01146         {
<a name="l01147"></a>01147             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01148"></a>01148         }
<a name="l01149"></a>01149 
<a name="l01150"></a>01150         <span class="keywordflow">return</span> oniStreamIsPropertySupported(m_stream, propertyId) == TRUE;
<a name="l01151"></a>01151     }
<a name="l01152"></a>01152 
<a name="l01162"></a><a class="code" href="classopenni_1_1_video_stream.html#aaa6363371fa11f76e431462e913cffe2">01162</a>     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_video_stream.html#aaa6363371fa11f76e431462e913cffe2">invoke</a>(<span class="keywordtype">int</span> commandId, <span class="keywordtype">void</span>* data, <span class="keywordtype">int</span> dataSize)
<a name="l01163"></a>01163     {
<a name="l01164"></a>01164         <span class="keywordflow">if</span> (!<a class="code" href="classopenni_1_1_video_stream.html#ae187f95f14461215fed421a3d6a66625">isValid</a>())
<a name="l01165"></a>01165         {
<a name="l01166"></a>01166             <span class="keywordflow">return</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333a3b91bb9ad4a7c004eafb21f10de74346">STATUS_ERROR</a>;
<a name="l01167"></a>01167         }
<a name="l01168"></a>01168 
<a name="l01169"></a>01169         <span class="keywordflow">return</span> (<a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a>)oniStreamInvoke(m_stream, commandId, data, dataSize);
<a name="l01170"></a>01170     }
<a name="l01171"></a>01171 
<a name="l01181"></a>01181     <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l01182"></a><a class="code" href="classopenni_1_1_video_stream.html#a766858a79175545e8f509c652f6390c7">01182</a>     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_video_stream.html#aaa6363371fa11f76e431462e913cffe2">invoke</a>(<span class="keywordtype">int</span> commandId, T&amp; value)
<a name="l01183"></a>01183     {
<a name="l01184"></a>01184         <span class="keywordflow">return</span> <a class="code" href="classopenni_1_1_video_stream.html#aaa6363371fa11f76e431462e913cffe2">invoke</a>(commandId, &amp;value, <span class="keyword">sizeof</span>(T));
<a name="l01185"></a>01185     }
<a name="l01186"></a>01186 
<a name="l01192"></a><a class="code" href="classopenni_1_1_video_stream.html#a565db7c7a9d7f13960219c5d491898b7">01192</a>     <span class="keywordtype">bool</span> <a class="code" href="classopenni_1_1_video_stream.html#a565db7c7a9d7f13960219c5d491898b7">isCommandSupported</a>(<span class="keywordtype">int</span> commandId)<span class="keyword"> const</span>
<a name="l01193"></a>01193 <span class="keyword">    </span>{
<a name="l01194"></a>01194         <span class="keywordflow">if</span> (!<a class="code" href="classopenni_1_1_video_stream.html#ae187f95f14461215fed421a3d6a66625">isValid</a>())
<a name="l01195"></a>01195         {
<a name="l01196"></a>01196             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01197"></a>01197         }
<a name="l01198"></a>01198 
<a name="l01199"></a>01199         <span class="keywordflow">return</span> (<a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a>)oniStreamIsCommandSupported(m_stream, commandId) == TRUE;
<a name="l01200"></a>01200     }
<a name="l01201"></a>01201 
<a name="l01202"></a>01202 <span class="keyword">private</span>:
<a name="l01203"></a><a class="code" href="classopenni_1_1_video_stream.html#a520fa05e0bf58785da428f7a0241eee2">01203</a>     <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classopenni_1_1_device.html">Device</a>;
<a name="l01204"></a>01204 
<a name="l01205"></a>01205     <span class="keywordtype">void</span> _setHandle(OniStreamHandle stream)
<a name="l01206"></a>01206     {
<a name="l01207"></a>01207         m_sensorInfo._setInternal(NULL);
<a name="l01208"></a>01208         m_stream = stream;
<a name="l01209"></a>01209 
<a name="l01210"></a>01210         <span class="keywordflow">if</span> (stream != NULL)
<a name="l01211"></a>01211         {
<a name="l01212"></a>01212             m_sensorInfo._setInternal(oniStreamGetSensorInfo(m_stream));
<a name="l01213"></a>01213         }
<a name="l01214"></a>01214     }
<a name="l01215"></a>01215 
<a name="l01216"></a>01216 <span class="keyword">private</span>:
<a name="l01217"></a>01217     <a class="code" href="classopenni_1_1_video_stream.html#ad9e23fcc619535149c8833eea9fc2918">VideoStream</a>(<span class="keyword">const</span> <a class="code" href="classopenni_1_1_video_stream.html#ad9e23fcc619535149c8833eea9fc2918">VideoStream</a>&amp; other);
<a name="l01218"></a>01218     <a class="code" href="classopenni_1_1_video_stream.html#ad9e23fcc619535149c8833eea9fc2918">VideoStream</a>&amp; operator=(<span class="keyword">const</span> <a class="code" href="classopenni_1_1_video_stream.html#ad9e23fcc619535149c8833eea9fc2918">VideoStream</a>&amp; other);
<a name="l01219"></a>01219 
<a name="l01220"></a>01220     OniStreamHandle m_stream;
<a name="l01221"></a>01221     SensorInfo m_sensorInfo;
<a name="l01222"></a>01222     CameraSettings* m_pCameraSettings;
<a name="l01223"></a>01223     <span class="keywordtype">bool</span> m_isOwner;
<a name="l01224"></a>01224 };
<a name="l01225"></a>01225 
<a name="l01242"></a><a class="code" href="classopenni_1_1_device.html">01242</a> <span class="keyword">class </span><a class="code" href="classopenni_1_1_device.html">Device</a>
<a name="l01243"></a>01243 {
<a name="l01244"></a>01244 <span class="keyword">public</span>:
<a name="l01249"></a><a class="code" href="classopenni_1_1_device.html#a1216228442de43e088a66ddf3f21c846">01249</a>     <a class="code" href="classopenni_1_1_device.html#a1216228442de43e088a66ddf3f21c846">Device</a>() : m_pPlaybackControl(NULL), m_device(NULL), m_isOwner(true)
<a name="l01250"></a>01250     {
<a name="l01251"></a>01251         clearSensors();
<a name="l01252"></a>01252     }
<a name="l01253"></a>01253 
<a name="l01258"></a><a class="code" href="classopenni_1_1_device.html#a59056d375ecb412a1b26da76c500a74e">01258</a>     <span class="keyword">explicit</span> <a class="code" href="classopenni_1_1_device.html#a1216228442de43e088a66ddf3f21c846">Device</a>(OniDeviceHandle handle) : m_pPlaybackControl(NULL), m_device(NULL), m_isOwner(false)
<a name="l01259"></a>01259     {
<a name="l01260"></a>01260         _setHandle(handle);
<a name="l01261"></a>01261     }
<a name="l01262"></a>01262 
<a name="l01267"></a><a class="code" href="classopenni_1_1_device.html#a5faa442b23dfef84aa77d9117980a3ab">01267</a>     <a class="code" href="classopenni_1_1_device.html#a5faa442b23dfef84aa77d9117980a3ab">~Device</a>()
<a name="l01268"></a>01268     {
<a name="l01269"></a>01269         <span class="keywordflow">if</span> (m_device != NULL)
<a name="l01270"></a>01270         {
<a name="l01271"></a>01271             <a class="code" href="classopenni_1_1_device.html#a1804e9fe6cd46185f762d01e8d949518">close</a>();
<a name="l01272"></a>01272         }
<a name="l01273"></a>01273     }
<a name="l01274"></a>01274 
<a name="l01304"></a>01304     <span class="keyword">inline</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_device.html#a2240eaf483ea04506f320f3cd963ca62">open</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* uri);
<a name="l01305"></a>01305 
<a name="l01311"></a>01311     <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classopenni_1_1_device.html#a1804e9fe6cd46185f762d01e8d949518">close</a>();
<a name="l01312"></a>01312 
<a name="l01322"></a><a class="code" href="classopenni_1_1_device.html#a3e69ec283c5f886018d9bbbc09f29122">01322</a>     <span class="keyword">const</span> <a class="code" href="classopenni_1_1_device_info.html">DeviceInfo</a>&amp; <a class="code" href="classopenni_1_1_device.html#a3e69ec283c5f886018d9bbbc09f29122">getDeviceInfo</a>()<span class="keyword"> const</span>
<a name="l01323"></a>01323 <span class="keyword">    </span>{
<a name="l01324"></a>01324         <span class="keywordflow">return</span> m_deviceInfo;
<a name="l01325"></a>01325     }
<a name="l01326"></a>01326 
<a name="l01334"></a><a class="code" href="classopenni_1_1_device.html#aff0664ccc8e969e4778fec07b6adf81f">01334</a>     <span class="keywordtype">bool</span> <a class="code" href="classopenni_1_1_device.html#aff0664ccc8e969e4778fec07b6adf81f">hasSensor</a>(<a class="code" href="namespaceopenni.html#a50658bbbf9f6e9e57aa6ebdb768fd8c2">SensorType</a> sensorType)
<a name="l01335"></a>01335     {
<a name="l01336"></a>01336         <span class="keywordtype">int</span> i;
<a name="l01337"></a>01337         <span class="keywordflow">for</span> (i = 0; (i &lt; ONI_MAX_SENSORS) &amp;&amp; (m_aSensorInfo[i].m_pInfo != NULL); ++i)
<a name="l01338"></a>01338         {
<a name="l01339"></a>01339             <span class="keywordflow">if</span> (m_aSensorInfo[i].getSensorType() == sensorType)
<a name="l01340"></a>01340             {
<a name="l01341"></a>01341                 <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01342"></a>01342             }
<a name="l01343"></a>01343         }
<a name="l01344"></a>01344 
<a name="l01345"></a>01345         <span class="keywordflow">if</span> (i == ONI_MAX_SENSORS)
<a name="l01346"></a>01346         {
<a name="l01347"></a>01347             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01348"></a>01348         }
<a name="l01349"></a>01349 
<a name="l01350"></a>01350         <span class="keyword">const</span> OniSensorInfo* pInfo = oniDeviceGetSensorInfo(m_device, (OniSensorType)sensorType);
<a name="l01351"></a>01351 
<a name="l01352"></a>01352         <span class="keywordflow">if</span> (pInfo == NULL)
<a name="l01353"></a>01353         {
<a name="l01354"></a>01354             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01355"></a>01355         }
<a name="l01356"></a>01356 
<a name="l01357"></a>01357         m_aSensorInfo[i]._setInternal(pInfo);
<a name="l01358"></a>01358 
<a name="l01359"></a>01359         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01360"></a>01360     }
<a name="l01361"></a>01361 
<a name="l01369"></a><a class="code" href="classopenni_1_1_device.html#ae2f512f237ee1d3d464250a8bdb81925">01369</a>     <span class="keyword">const</span> <a class="code" href="classopenni_1_1_sensor_info.html">SensorInfo</a>* <a class="code" href="classopenni_1_1_device.html#ae2f512f237ee1d3d464250a8bdb81925">getSensorInfo</a>(<a class="code" href="namespaceopenni.html#a50658bbbf9f6e9e57aa6ebdb768fd8c2">SensorType</a> sensorType)
<a name="l01370"></a>01370     {
<a name="l01371"></a>01371         <span class="keywordtype">int</span> i;
<a name="l01372"></a>01372         <span class="keywordflow">for</span> (i = 0; (i &lt; ONI_MAX_SENSORS) &amp;&amp; (m_aSensorInfo[i].m_pInfo != NULL); ++i)
<a name="l01373"></a>01373         {
<a name="l01374"></a>01374             <span class="keywordflow">if</span> (m_aSensorInfo[i].getSensorType() == sensorType)
<a name="l01375"></a>01375             {
<a name="l01376"></a>01376                 <span class="keywordflow">return</span> &amp;m_aSensorInfo[i];
<a name="l01377"></a>01377             }
<a name="l01378"></a>01378         }
<a name="l01379"></a>01379 
<a name="l01380"></a>01380         <span class="comment">// not found. check to see we have additional space</span>
<a name="l01381"></a>01381         <span class="keywordflow">if</span> (i == ONI_MAX_SENSORS)
<a name="l01382"></a>01382         {
<a name="l01383"></a>01383             <span class="keywordflow">return</span> NULL;
<a name="l01384"></a>01384         }
<a name="l01385"></a>01385 
<a name="l01386"></a>01386         <span class="keyword">const</span> OniSensorInfo* pInfo = oniDeviceGetSensorInfo(m_device, (OniSensorType)sensorType);
<a name="l01387"></a>01387         <span class="keywordflow">if</span> (pInfo == NULL)
<a name="l01388"></a>01388         {
<a name="l01389"></a>01389             <span class="keywordflow">return</span> NULL;
<a name="l01390"></a>01390         }
<a name="l01391"></a>01391 
<a name="l01392"></a>01392         m_aSensorInfo[i]._setInternal(pInfo);
<a name="l01393"></a>01393         <span class="keywordflow">return</span> &amp;m_aSensorInfo[i];
<a name="l01394"></a>01394     }
<a name="l01395"></a>01395 
<a name="l01400"></a>01400     OniDeviceHandle _getHandle()<span class="keyword"> const</span>
<a name="l01401"></a>01401 <span class="keyword">    </span>{
<a name="l01402"></a>01402         <span class="keywordflow">return</span> m_device;
<a name="l01403"></a>01403     }
<a name="l01404"></a>01404 
<a name="l01409"></a><a class="code" href="classopenni_1_1_device.html#ab1b0ec1efd1dc208d1f11a91257d3f91">01409</a>     <a class="code" href="classopenni_1_1_playback_control.html">PlaybackControl</a>* <a class="code" href="classopenni_1_1_device.html#ab1b0ec1efd1dc208d1f11a91257d3f91">getPlaybackControl</a>() {<span class="keywordflow">return</span> m_pPlaybackControl;}
<a name="l01410"></a>01410 
<a name="l01422"></a><a class="code" href="classopenni_1_1_device.html#a6d6e17eb936779cc22e7e1f68a240d88">01422</a>     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_device.html#a6d6e17eb936779cc22e7e1f68a240d88">getProperty</a>(<span class="keywordtype">int</span> propertyId, <span class="keywordtype">void</span>* data, <span class="keywordtype">int</span>* dataSize)<span class="keyword"> const</span>
<a name="l01423"></a>01423 <span class="keyword">    </span>{
<a name="l01424"></a>01424         <span class="keywordflow">return</span> (<a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a>)oniDeviceGetProperty(m_device, propertyId, data, dataSize);
<a name="l01425"></a>01425     }
<a name="l01426"></a>01426 
<a name="l01438"></a><a class="code" href="classopenni_1_1_device.html#aef50fe8316bd537275e84cced6dd7890">01438</a>     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_device.html#aef50fe8316bd537275e84cced6dd7890">setProperty</a>(<span class="keywordtype">int</span> propertyId, <span class="keyword">const</span> <span class="keywordtype">void</span>* data, <span class="keywordtype">int</span> dataSize)
<a name="l01439"></a>01439     {
<a name="l01440"></a>01440         <span class="keywordflow">return</span> (<a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a>)oniDeviceSetProperty(m_device, propertyId, data, dataSize);
<a name="l01441"></a>01441     }
<a name="l01442"></a>01442 
<a name="l01450"></a><a class="code" href="classopenni_1_1_device.html#aaadcb55afcced08fcec9b3c88d98e39a">01450</a>     <span class="keywordtype">bool</span> <a class="code" href="classopenni_1_1_device.html#aaadcb55afcced08fcec9b3c88d98e39a">isImageRegistrationModeSupported</a>(<a class="code" href="namespaceopenni.html#a6c671425ce625070b9d913306198eb9c">ImageRegistrationMode</a> mode)<span class="keyword"> const</span>
<a name="l01451"></a>01451 <span class="keyword">    </span>{
<a name="l01452"></a>01452         <span class="keywordflow">return</span> (oniDeviceIsImageRegistrationModeSupported(m_device, (OniImageRegistrationMode)mode) == TRUE);
<a name="l01453"></a>01453     }
<a name="l01454"></a>01454 
<a name="l01462"></a><a class="code" href="classopenni_1_1_device.html#a27b6ec5ffc1a851ee334d64eb94ca1a3">01462</a>     <a class="code" href="namespaceopenni.html#a6c671425ce625070b9d913306198eb9c">ImageRegistrationMode</a> <a class="code" href="classopenni_1_1_device.html#a27b6ec5ffc1a851ee334d64eb94ca1a3">getImageRegistrationMode</a>()<span class="keyword"> const</span>
<a name="l01463"></a>01463 <span class="keyword">    </span>{
<a name="l01464"></a>01464         <a class="code" href="namespaceopenni.html#a6c671425ce625070b9d913306198eb9c">ImageRegistrationMode</a> mode;
<a name="l01465"></a>01465         <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> rc = getProperty&lt;ImageRegistrationMode&gt;(DEVICE_PROPERTY_IMAGE_REGISTRATION, &amp;mode);
<a name="l01466"></a>01466         <span class="keywordflow">if</span> (rc != <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333ac4a1d7871ca526614cc705cd34b67367">STATUS_OK</a>)
<a name="l01467"></a>01467         {
<a name="l01468"></a>01468             <span class="keywordflow">return</span> <a class="code" href="namespaceopenni.html#a6c671425ce625070b9d913306198eb9ca143ed30372dfe6638316fa04a3f1969d">IMAGE_REGISTRATION_OFF</a>;
<a name="l01469"></a>01469         }
<a name="l01470"></a>01470         <span class="keywordflow">return</span> mode;
<a name="l01471"></a>01471     }
<a name="l01472"></a>01472 
<a name="l01486"></a><a class="code" href="classopenni_1_1_device.html#a28161dabfe92ce624d7a805ff8f4ec6e">01486</a>     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_device.html#a28161dabfe92ce624d7a805ff8f4ec6e">setImageRegistrationMode</a>(<a class="code" href="namespaceopenni.html#a6c671425ce625070b9d913306198eb9c">ImageRegistrationMode</a> mode)
<a name="l01487"></a>01487     {
<a name="l01488"></a>01488         <span class="keywordflow">return</span> setProperty&lt;ImageRegistrationMode&gt;(DEVICE_PROPERTY_IMAGE_REGISTRATION, mode);
<a name="l01489"></a>01489     }
<a name="l01490"></a>01490 
<a name="l01495"></a><a class="code" href="classopenni_1_1_device.html#a17435124df6c3c795fe9ff160fbeff74">01495</a>     <span class="keywordtype">bool</span> <a class="code" href="classopenni_1_1_device.html#a17435124df6c3c795fe9ff160fbeff74">isValid</a>()<span class="keyword"> const</span>
<a name="l01496"></a>01496 <span class="keyword">    </span>{
<a name="l01497"></a>01497         <span class="keywordflow">return</span> m_device != NULL;
<a name="l01498"></a>01498     }
<a name="l01499"></a>01499 
<a name="l01504"></a><a class="code" href="classopenni_1_1_device.html#aa79925de3c47e902b28123b846027ecc">01504</a>     <span class="keywordtype">bool</span> <a class="code" href="classopenni_1_1_device.html#aa79925de3c47e902b28123b846027ecc">isFile</a>()<span class="keyword"> const</span>
<a name="l01505"></a>01505 <span class="keyword">    </span>{
<a name="l01506"></a>01506         <span class="keywordflow">return</span> <a class="code" href="classopenni_1_1_device.html#af39a1ebd7f9f2e4a39566e86fa881d43">isPropertySupported</a>(DEVICE_PROPERTY_PLAYBACK_SPEED) &amp;&amp;
<a name="l01507"></a>01507             <a class="code" href="classopenni_1_1_device.html#af39a1ebd7f9f2e4a39566e86fa881d43">isPropertySupported</a>(DEVICE_PROPERTY_PLAYBACK_REPEAT_ENABLED) &amp;&amp;
<a name="l01508"></a>01508             <a class="code" href="classopenni_1_1_device.html#a65af6533d3c51656cccaedd4773a47a0">isCommandSupported</a>(DEVICE_COMMAND_SEEK);
<a name="l01509"></a>01509     }
<a name="l01510"></a>01510 
<a name="l01519"></a><a class="code" href="classopenni_1_1_device.html#a94dfc240ffd2f8e777494d10814d5d07">01519</a>     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_device.html#a94dfc240ffd2f8e777494d10814d5d07">setDepthColorSyncEnabled</a>(<span class="keywordtype">bool</span> isEnabled)
<a name="l01520"></a>01520     {
<a name="l01521"></a>01521         <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> rc = <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333ac4a1d7871ca526614cc705cd34b67367">STATUS_OK</a>;
<a name="l01522"></a>01522 
<a name="l01523"></a>01523         <span class="keywordflow">if</span> (isEnabled)
<a name="l01524"></a>01524         {
<a name="l01525"></a>01525             rc = (<a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a>)oniDeviceEnableDepthColorSync(m_device);
<a name="l01526"></a>01526         }
<a name="l01527"></a>01527         <span class="keywordflow">else</span>
<a name="l01528"></a>01528         {
<a name="l01529"></a>01529             oniDeviceDisableDepthColorSync(m_device);
<a name="l01530"></a>01530         }
<a name="l01531"></a>01531 
<a name="l01532"></a>01532         <span class="keywordflow">return</span> rc;
<a name="l01533"></a>01533     }
<a name="l01534"></a>01534 
<a name="l01535"></a><a class="code" href="classopenni_1_1_device.html#af01251ba63a30cac547511e7af71c920">01535</a>     <span class="keywordtype">bool</span> <a class="code" href="classopenni_1_1_device.html#af01251ba63a30cac547511e7af71c920">getDepthColorSyncEnabled</a>()
<a name="l01536"></a>01536     {
<a name="l01537"></a>01537         <span class="keywordflow">return</span> oniDeviceGetDepthColorSyncEnabled(m_device) == TRUE;
<a name="l01538"></a>01538     }
<a name="l01539"></a>01539 
<a name="l01550"></a>01550     <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l01551"></a><a class="code" href="classopenni_1_1_device.html#a0879db9460aa56f1b85b4dcd569f797c">01551</a>     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_device.html#aef50fe8316bd537275e84cced6dd7890">setProperty</a>(<span class="keywordtype">int</span> propertyId, <span class="keyword">const</span> T&amp; value)
<a name="l01552"></a>01552     {
<a name="l01553"></a>01553         <span class="keywordflow">return</span> <a class="code" href="classopenni_1_1_device.html#aef50fe8316bd537275e84cced6dd7890">setProperty</a>(propertyId, &amp;value, <span class="keyword">sizeof</span>(T));
<a name="l01554"></a>01554     }
<a name="l01555"></a>01555 
<a name="l01565"></a>01565     <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l01566"></a><a class="code" href="classopenni_1_1_device.html#ab3a1a6566e8c95eaf759114a946806f9">01566</a>     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_device.html#a6d6e17eb936779cc22e7e1f68a240d88">getProperty</a>(<span class="keywordtype">int</span> propertyId, T* value)<span class="keyword"> const</span>
<a name="l01567"></a>01567 <span class="keyword">    </span>{
<a name="l01568"></a>01568         <span class="keywordtype">int</span> size = <span class="keyword">sizeof</span>(T);
<a name="l01569"></a>01569         <span class="keywordflow">return</span> <a class="code" href="classopenni_1_1_device.html#a6d6e17eb936779cc22e7e1f68a240d88">getProperty</a>(propertyId, value, &amp;size);
<a name="l01570"></a>01570     }
<a name="l01571"></a>01571 
<a name="l01577"></a><a class="code" href="classopenni_1_1_device.html#af39a1ebd7f9f2e4a39566e86fa881d43">01577</a>     <span class="keywordtype">bool</span> <a class="code" href="classopenni_1_1_device.html#af39a1ebd7f9f2e4a39566e86fa881d43">isPropertySupported</a>(<span class="keywordtype">int</span> propertyId)<span class="keyword"> const</span>
<a name="l01578"></a>01578 <span class="keyword">    </span>{
<a name="l01579"></a>01579         <span class="keywordflow">return</span> oniDeviceIsPropertySupported(m_device, propertyId) == TRUE;
<a name="l01580"></a>01580     }
<a name="l01581"></a>01581 
<a name="l01591"></a><a class="code" href="classopenni_1_1_device.html#a67d755db987d9d608001b13558c97de9">01591</a>     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_device.html#a67d755db987d9d608001b13558c97de9">invoke</a>(<span class="keywordtype">int</span> commandId, <span class="keywordtype">void</span>* data, <span class="keywordtype">int</span> dataSize)
<a name="l01592"></a>01592     {
<a name="l01593"></a>01593         <span class="keywordflow">return</span> (<a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a>)oniDeviceInvoke(m_device, commandId, data, dataSize);
<a name="l01594"></a>01594     }
<a name="l01595"></a>01595 
<a name="l01605"></a>01605     <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l01606"></a><a class="code" href="classopenni_1_1_device.html#ab2d93274884a29de212e5346c2f221b2">01606</a>     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_device.html#a67d755db987d9d608001b13558c97de9">invoke</a>(<span class="keywordtype">int</span> propertyId, T&amp; value)
<a name="l01607"></a>01607     {
<a name="l01608"></a>01608         <span class="keywordflow">return</span> <a class="code" href="classopenni_1_1_device.html#a67d755db987d9d608001b13558c97de9">invoke</a>(propertyId, &amp;value, <span class="keyword">sizeof</span>(T));
<a name="l01609"></a>01609     }
<a name="l01610"></a>01610 
<a name="l01616"></a><a class="code" href="classopenni_1_1_device.html#a65af6533d3c51656cccaedd4773a47a0">01616</a>     <span class="keywordtype">bool</span> <a class="code" href="classopenni_1_1_device.html#a65af6533d3c51656cccaedd4773a47a0">isCommandSupported</a>(<span class="keywordtype">int</span> commandId)<span class="keyword"> const</span>
<a name="l01617"></a>01617 <span class="keyword">    </span>{
<a name="l01618"></a>01618         <span class="keywordflow">return</span> oniDeviceIsCommandSupported(m_device, commandId) == TRUE;
<a name="l01619"></a>01619     }
<a name="l01620"></a>01620 
<a name="l01622"></a>01622     <span class="keyword">inline</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> _openEx(<span class="keyword">const</span> <span class="keywordtype">char</span>* uri, <span class="keyword">const</span> <span class="keywordtype">char</span>* mode);
<a name="l01623"></a>01623 
<a name="l01624"></a>01624 <span class="keyword">private</span>:
<a name="l01625"></a>01625     <a class="code" href="classopenni_1_1_device.html#a1216228442de43e088a66ddf3f21c846">Device</a>(<span class="keyword">const</span> <a class="code" href="classopenni_1_1_device.html">Device</a>&amp;);
<a name="l01626"></a>01626     <a class="code" href="classopenni_1_1_device.html">Device</a>&amp; operator=(<span class="keyword">const</span> <a class="code" href="classopenni_1_1_device.html">Device</a>&amp;);
<a name="l01627"></a>01627 
<a name="l01628"></a>01628     <span class="keywordtype">void</span> clearSensors()
<a name="l01629"></a>01629     {
<a name="l01630"></a>01630         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; ONI_MAX_SENSORS; ++i)
<a name="l01631"></a>01631         {
<a name="l01632"></a>01632             m_aSensorInfo[i]._setInternal(NULL);
<a name="l01633"></a>01633         }
<a name="l01634"></a>01634     }
<a name="l01635"></a>01635 
<a name="l01636"></a>01636     <span class="keyword">inline</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> _setHandle(OniDeviceHandle deviceHandle);
<a name="l01637"></a>01637 
<a name="l01638"></a>01638 <span class="keyword">private</span>:
<a name="l01639"></a>01639     PlaybackControl* m_pPlaybackControl;
<a name="l01640"></a>01640 
<a name="l01641"></a>01641     OniDeviceHandle m_device;
<a name="l01642"></a>01642     DeviceInfo m_deviceInfo;
<a name="l01643"></a>01643     SensorInfo m_aSensorInfo[ONI_MAX_SENSORS];
<a name="l01644"></a>01644 
<a name="l01645"></a>01645     <span class="keywordtype">bool</span> m_isOwner;
<a name="l01646"></a>01646 };
<a name="l01647"></a>01647 
<a name="l01661"></a><a class="code" href="classopenni_1_1_playback_control.html">01661</a> <span class="keyword">class </span><a class="code" href="classopenni_1_1_playback_control.html">PlaybackControl</a>
<a name="l01662"></a>01662 {
<a name="l01663"></a>01663 <span class="keyword">public</span>:
<a name="l01664"></a>01664 
<a name="l01670"></a><a class="code" href="classopenni_1_1_playback_control.html#a1ff78b61cdde4b4777b30325d0cda0d9">01670</a>     <a class="code" href="classopenni_1_1_playback_control.html#a1ff78b61cdde4b4777b30325d0cda0d9">~PlaybackControl</a>()
<a name="l01671"></a>01671     {
<a name="l01672"></a>01672         detach();
<a name="l01673"></a>01673     }
<a name="l01674"></a>01674 
<a name="l01695"></a><a class="code" href="classopenni_1_1_playback_control.html#a5dfee4f2341dc847b6a9d9e0b5319a1f">01695</a>     <span class="keywordtype">float</span> <a class="code" href="classopenni_1_1_playback_control.html#a5dfee4f2341dc847b6a9d9e0b5319a1f">getSpeed</a>()<span class="keyword"> const</span>
<a name="l01696"></a>01696 <span class="keyword">    </span>{
<a name="l01697"></a>01697         <span class="keywordflow">if</span> (!<a class="code" href="classopenni_1_1_playback_control.html#a3d96a42d8fe9880326a18fb10e4cd618">isValid</a>())
<a name="l01698"></a>01698         {
<a name="l01699"></a>01699             <span class="keywordflow">return</span> 0.0f;
<a name="l01700"></a>01700         }
<a name="l01701"></a>01701         <span class="keywordtype">float</span> speed;
<a name="l01702"></a>01702         <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> rc = m_pDevice-&gt;<a class="code" href="classopenni_1_1_device.html#a6d6e17eb936779cc22e7e1f68a240d88">getProperty</a>&lt;<span class="keywordtype">float</span>&gt;(DEVICE_PROPERTY_PLAYBACK_SPEED, &amp;speed);
<a name="l01703"></a>01703         <span class="keywordflow">if</span> (rc != <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333ac4a1d7871ca526614cc705cd34b67367">STATUS_OK</a>)
<a name="l01704"></a>01704         {
<a name="l01705"></a>01705             <span class="keywordflow">return</span> 1.0f;
<a name="l01706"></a>01706         }
<a name="l01707"></a>01707         <span class="keywordflow">return</span> speed;
<a name="l01708"></a>01708     }
<a name="l01716"></a><a class="code" href="classopenni_1_1_playback_control.html#a3ba6436562df82179e118296f3c897ee">01716</a>     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_playback_control.html#a3ba6436562df82179e118296f3c897ee">setSpeed</a>(<span class="keywordtype">float</span> speed)
<a name="l01717"></a>01717     {
<a name="l01718"></a>01718         <span class="keywordflow">if</span> (!<a class="code" href="classopenni_1_1_playback_control.html#a3d96a42d8fe9880326a18fb10e4cd618">isValid</a>())
<a name="l01719"></a>01719         {
<a name="l01720"></a>01720             <span class="keywordflow">return</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333a9908514b009593d2309afb77e01915c4">STATUS_NO_DEVICE</a>;
<a name="l01721"></a>01721         }
<a name="l01722"></a>01722         <span class="keywordflow">return</span> m_pDevice-&gt;<a class="code" href="classopenni_1_1_device.html#aef50fe8316bd537275e84cced6dd7890">setProperty</a>&lt;<span class="keywordtype">float</span>&gt;(DEVICE_PROPERTY_PLAYBACK_SPEED, speed);
<a name="l01723"></a>01723     }
<a name="l01724"></a>01724 
<a name="l01730"></a><a class="code" href="classopenni_1_1_playback_control.html#a81ea2303199474834e12407b4752fb3a">01730</a>     <span class="keywordtype">bool</span> <a class="code" href="classopenni_1_1_playback_control.html#a81ea2303199474834e12407b4752fb3a">getRepeatEnabled</a>()<span class="keyword"> const</span>
<a name="l01731"></a>01731 <span class="keyword">    </span>{
<a name="l01732"></a>01732         <span class="keywordflow">if</span> (!<a class="code" href="classopenni_1_1_playback_control.html#a3d96a42d8fe9880326a18fb10e4cd618">isValid</a>())
<a name="l01733"></a>01733         {
<a name="l01734"></a>01734             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01735"></a>01735         }
<a name="l01736"></a>01736 
<a name="l01737"></a>01737         OniBool repeat;
<a name="l01738"></a>01738         <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> rc = m_pDevice-&gt;<a class="code" href="classopenni_1_1_device.html#a6d6e17eb936779cc22e7e1f68a240d88">getProperty</a>&lt;OniBool&gt;(DEVICE_PROPERTY_PLAYBACK_REPEAT_ENABLED, &amp;repeat);
<a name="l01739"></a>01739         <span class="keywordflow">if</span> (rc != <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333ac4a1d7871ca526614cc705cd34b67367">STATUS_OK</a>)
<a name="l01740"></a>01740         {
<a name="l01741"></a>01741             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01742"></a>01742         }
<a name="l01743"></a>01743 
<a name="l01744"></a>01744         <span class="keywordflow">return</span> repeat == TRUE;
<a name="l01745"></a>01745     }
<a name="l01746"></a>01746 
<a name="l01755"></a><a class="code" href="classopenni_1_1_playback_control.html#ab0c377c5276294889e2562acb8163d30">01755</a>     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_playback_control.html#ab0c377c5276294889e2562acb8163d30">setRepeatEnabled</a>(<span class="keywordtype">bool</span> repeat)
<a name="l01756"></a>01756     {
<a name="l01757"></a>01757         <span class="keywordflow">if</span> (!<a class="code" href="classopenni_1_1_playback_control.html#a3d96a42d8fe9880326a18fb10e4cd618">isValid</a>())
<a name="l01758"></a>01758         {
<a name="l01759"></a>01759             <span class="keywordflow">return</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333a9908514b009593d2309afb77e01915c4">STATUS_NO_DEVICE</a>;
<a name="l01760"></a>01760         }
<a name="l01761"></a>01761 
<a name="l01762"></a>01762         <span class="keywordflow">return</span> m_pDevice-&gt;<a class="code" href="classopenni_1_1_device.html#aef50fe8316bd537275e84cced6dd7890">setProperty</a>&lt;OniBool&gt;(DEVICE_PROPERTY_PLAYBACK_REPEAT_ENABLED, repeat ? TRUE : FALSE);
<a name="l01763"></a>01763     }
<a name="l01764"></a>01764 
<a name="l01775"></a><a class="code" href="classopenni_1_1_playback_control.html#a99d10ea20ad021cfe056ff225d31d840">01775</a>     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_playback_control.html#a99d10ea20ad021cfe056ff225d31d840">seek</a>(<span class="keyword">const</span> <a class="code" href="classopenni_1_1_video_stream.html">VideoStream</a>&amp; stream, <span class="keywordtype">int</span> frameIndex)
<a name="l01776"></a>01776     {
<a name="l01777"></a>01777         <span class="keywordflow">if</span> (!<a class="code" href="classopenni_1_1_playback_control.html#a3d96a42d8fe9880326a18fb10e4cd618">isValid</a>())
<a name="l01778"></a>01778         {
<a name="l01779"></a>01779             <span class="keywordflow">return</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333a9908514b009593d2309afb77e01915c4">STATUS_NO_DEVICE</a>;
<a name="l01780"></a>01780         }
<a name="l01781"></a>01781         OniSeek <a class="code" href="classopenni_1_1_playback_control.html#a99d10ea20ad021cfe056ff225d31d840">seek</a>;
<a name="l01782"></a>01782         seek.frameIndex = frameIndex;
<a name="l01783"></a>01783         seek.stream = stream._getHandle();
<a name="l01784"></a>01784         <span class="keywordflow">return</span> m_pDevice-&gt;<a class="code" href="classopenni_1_1_device.html#a67d755db987d9d608001b13558c97de9">invoke</a>(DEVICE_COMMAND_SEEK, seek);
<a name="l01785"></a>01785     }
<a name="l01786"></a>01786 
<a name="l01795"></a><a class="code" href="classopenni_1_1_playback_control.html#a16916573c6a11d1112444222c5f31158">01795</a>     <span class="keywordtype">int</span> <a class="code" href="classopenni_1_1_playback_control.html#a16916573c6a11d1112444222c5f31158">getNumberOfFrames</a>(<span class="keyword">const</span> <a class="code" href="classopenni_1_1_video_stream.html">VideoStream</a>&amp; stream)<span class="keyword"> const</span>
<a name="l01796"></a>01796 <span class="keyword">    </span>{
<a name="l01797"></a>01797         <span class="keywordtype">int</span> numOfFrames = -1;
<a name="l01798"></a>01798         <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> rc = stream.<a class="code" href="classopenni_1_1_video_stream.html#adc8197276c332ce2afcf322de68e0e04">getProperty</a>&lt;<span class="keywordtype">int</span>&gt;(STREAM_PROPERTY_NUMBER_OF_FRAMES, &amp;numOfFrames);
<a name="l01799"></a>01799         <span class="keywordflow">if</span> (rc != <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333ac4a1d7871ca526614cc705cd34b67367">STATUS_OK</a>)
<a name="l01800"></a>01800         {
<a name="l01801"></a>01801             <span class="keywordflow">return</span> 0;
<a name="l01802"></a>01802         }
<a name="l01803"></a>01803         <span class="keywordflow">return</span> numOfFrames;
<a name="l01804"></a>01804     }
<a name="l01805"></a>01805 
<a name="l01806"></a><a class="code" href="classopenni_1_1_playback_control.html#a3d96a42d8fe9880326a18fb10e4cd618">01806</a>     <span class="keywordtype">bool</span> <a class="code" href="classopenni_1_1_playback_control.html#a3d96a42d8fe9880326a18fb10e4cd618">isValid</a>()<span class="keyword"> const</span>
<a name="l01807"></a>01807 <span class="keyword">    </span>{
<a name="l01808"></a>01808         <span class="keywordflow">return</span> m_pDevice != NULL;
<a name="l01809"></a>01809     }
<a name="l01810"></a>01810 <span class="keyword">private</span>:
<a name="l01811"></a>01811     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> attach(<a class="code" href="classopenni_1_1_device.html">Device</a>* device)
<a name="l01812"></a>01812     {
<a name="l01813"></a>01813         <span class="keywordflow">if</span> (!device-&gt;<a class="code" href="classopenni_1_1_device.html#a17435124df6c3c795fe9ff160fbeff74">isValid</a>() || !device-&gt;<a class="code" href="classopenni_1_1_device.html#aa79925de3c47e902b28123b846027ecc">isFile</a>())
<a name="l01814"></a>01814         {
<a name="l01815"></a>01815             <span class="keywordflow">return</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333a3b91bb9ad4a7c004eafb21f10de74346">STATUS_ERROR</a>;
<a name="l01816"></a>01816         }
<a name="l01817"></a>01817 
<a name="l01818"></a>01818         detach();
<a name="l01819"></a>01819         m_pDevice = device;
<a name="l01820"></a>01820 
<a name="l01821"></a>01821         <span class="keywordflow">return</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333ac4a1d7871ca526614cc705cd34b67367">STATUS_OK</a>;
<a name="l01822"></a>01822     }
<a name="l01823"></a>01823     <span class="keywordtype">void</span> detach()
<a name="l01824"></a>01824     {
<a name="l01825"></a>01825         m_pDevice = NULL;
<a name="l01826"></a>01826     }
<a name="l01827"></a>01827 
<a name="l01828"></a><a class="code" href="classopenni_1_1_playback_control.html#a520fa05e0bf58785da428f7a0241eee2">01828</a>     <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classopenni_1_1_device.html">Device</a>;
<a name="l01829"></a>01829     <a class="code" href="classopenni_1_1_playback_control.html">PlaybackControl</a>(<a class="code" href="classopenni_1_1_device.html">Device</a>* pDevice) : m_pDevice(NULL)
<a name="l01830"></a>01830     {
<a name="l01831"></a>01831         <span class="keywordflow">if</span> (pDevice != NULL)
<a name="l01832"></a>01832         {
<a name="l01833"></a>01833             attach(pDevice);
<a name="l01834"></a>01834         }
<a name="l01835"></a>01835     }
<a name="l01836"></a>01836 
<a name="l01837"></a>01837     <a class="code" href="classopenni_1_1_playback_control.html#a520fa05e0bf58785da428f7a0241eee2">Device</a>* m_pDevice;
<a name="l01838"></a>01838 };
<a name="l01839"></a>01839 
<a name="l01840"></a><a class="code" href="classopenni_1_1_camera_settings.html">01840</a> <span class="keyword">class </span><a class="code" href="classopenni_1_1_camera_settings.html">CameraSettings</a>
<a name="l01841"></a>01841 {
<a name="l01842"></a>01842 <span class="keyword">public</span>:
<a name="l01843"></a>01843     <span class="comment">// setters</span>
<a name="l01844"></a><a class="code" href="classopenni_1_1_camera_settings.html#a0d5aba4f0ff486640504f789cfd48266">01844</a>     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_camera_settings.html#a0d5aba4f0ff486640504f789cfd48266">setAutoExposureEnabled</a>(<span class="keywordtype">bool</span> enabled)
<a name="l01845"></a>01845     {
<a name="l01846"></a>01846         <span class="keywordflow">return</span> setProperty(STREAM_PROPERTY_AUTO_EXPOSURE, enabled ? TRUE : FALSE);
<a name="l01847"></a>01847     }
<a name="l01848"></a><a class="code" href="classopenni_1_1_camera_settings.html#a93e2a514c334edbaa07efa680dc8b93a">01848</a>     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_camera_settings.html#a93e2a514c334edbaa07efa680dc8b93a">setAutoWhiteBalanceEnabled</a>(<span class="keywordtype">bool</span> enabled)
<a name="l01849"></a>01849     {
<a name="l01850"></a>01850         <span class="keywordflow">return</span> setProperty(STREAM_PROPERTY_AUTO_WHITE_BALANCE, enabled ? TRUE : FALSE);
<a name="l01851"></a>01851     }
<a name="l01852"></a>01852 
<a name="l01853"></a><a class="code" href="classopenni_1_1_camera_settings.html#aa0d08435915fcb1f4e61c0eec9ba74f9">01853</a>     <span class="keywordtype">bool</span> <a class="code" href="classopenni_1_1_camera_settings.html#aa0d08435915fcb1f4e61c0eec9ba74f9">getAutoExposureEnabled</a>()<span class="keyword"> const</span>
<a name="l01854"></a>01854 <span class="keyword">    </span>{
<a name="l01855"></a>01855         OniBool enabled = FALSE;
<a name="l01856"></a>01856 
<a name="l01857"></a>01857         <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> rc = getProperty(STREAM_PROPERTY_AUTO_EXPOSURE, &amp;enabled);
<a name="l01858"></a>01858         <span class="keywordflow">return</span> rc == <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333ac4a1d7871ca526614cc705cd34b67367">STATUS_OK</a> &amp;&amp; enabled == TRUE;
<a name="l01859"></a>01859     }
<a name="l01860"></a><a class="code" href="classopenni_1_1_camera_settings.html#a3672348680d77471408fcb3b733f1d5b">01860</a>     <span class="keywordtype">bool</span> <a class="code" href="classopenni_1_1_camera_settings.html#a3672348680d77471408fcb3b733f1d5b">getAutoWhiteBalanceEnabled</a>()<span class="keyword"> const</span>
<a name="l01861"></a>01861 <span class="keyword">    </span>{
<a name="l01862"></a>01862         OniBool enabled = FALSE;
<a name="l01863"></a>01863 
<a name="l01864"></a>01864         <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> rc = getProperty(STREAM_PROPERTY_AUTO_WHITE_BALANCE, &amp;enabled);
<a name="l01865"></a>01865         <span class="keywordflow">return</span> rc == <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333ac4a1d7871ca526614cc705cd34b67367">STATUS_OK</a> &amp;&amp; enabled == TRUE;
<a name="l01866"></a>01866     }
<a name="l01867"></a>01867 
<a name="l01868"></a><a class="code" href="classopenni_1_1_camera_settings.html#a28a8ecfbb8a198ebb4ad51b60e4794f4">01868</a>     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_camera_settings.html#a28a8ecfbb8a198ebb4ad51b60e4794f4">setGain</a>(<span class="keywordtype">int</span> gain)
<a name="l01869"></a>01869     {
<a name="l01870"></a>01870         <span class="keywordflow">return</span> setProperty(STREAM_PROPERTY_GAIN, gain);
<a name="l01871"></a>01871     }
<a name="l01872"></a><a class="code" href="classopenni_1_1_camera_settings.html#a1de2542079bb08af57439ab1ded165b7">01872</a>     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_camera_settings.html#a1de2542079bb08af57439ab1ded165b7">setExposure</a>(<span class="keywordtype">int</span> exposure)
<a name="l01873"></a>01873     {
<a name="l01874"></a>01874         <span class="keywordflow">return</span> setProperty(STREAM_PROPERTY_EXPOSURE, exposure);
<a name="l01875"></a>01875     }
<a name="l01876"></a><a class="code" href="classopenni_1_1_camera_settings.html#a6180ac6156cfdc81788f2805e207ee05">01876</a>     <span class="keywordtype">int</span> <a class="code" href="classopenni_1_1_camera_settings.html#a6180ac6156cfdc81788f2805e207ee05">getGain</a>()
<a name="l01877"></a>01877     {
<a name="l01878"></a>01878         <span class="keywordtype">int</span> gain;
<a name="l01879"></a>01879         <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> rc = getProperty(STREAM_PROPERTY_GAIN, &amp;gain);
<a name="l01880"></a>01880         <span class="keywordflow">if</span> (rc != <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333ac4a1d7871ca526614cc705cd34b67367">STATUS_OK</a>)
<a name="l01881"></a>01881         {
<a name="l01882"></a>01882             <span class="keywordflow">return</span> 100;
<a name="l01883"></a>01883         }
<a name="l01884"></a>01884         <span class="keywordflow">return</span> gain;
<a name="l01885"></a>01885     }
<a name="l01886"></a><a class="code" href="classopenni_1_1_camera_settings.html#a754f04c54eefa97b9c9384dab0040236">01886</a>     <span class="keywordtype">int</span> <a class="code" href="classopenni_1_1_camera_settings.html#a754f04c54eefa97b9c9384dab0040236">getExposure</a>()
<a name="l01887"></a>01887     {
<a name="l01888"></a>01888         <span class="keywordtype">int</span> exposure;
<a name="l01889"></a>01889         <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> rc = getProperty(STREAM_PROPERTY_EXPOSURE, &amp;exposure);
<a name="l01890"></a>01890         <span class="keywordflow">if</span> (rc != <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333ac4a1d7871ca526614cc705cd34b67367">STATUS_OK</a>)
<a name="l01891"></a>01891         {
<a name="l01892"></a>01892             <span class="keywordflow">return</span> 0;
<a name="l01893"></a>01893         }
<a name="l01894"></a>01894         <span class="keywordflow">return</span> exposure;
<a name="l01895"></a>01895     }
<a name="l01896"></a>01896 
<a name="l01897"></a><a class="code" href="classopenni_1_1_camera_settings.html#afa314aa55a6554a51d3d9a8ef3defff7">01897</a>     <span class="keywordtype">bool</span> <a class="code" href="classopenni_1_1_camera_settings.html#afa314aa55a6554a51d3d9a8ef3defff7">isValid</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> m_pStream != NULL;}
<a name="l01898"></a>01898 <span class="keyword">private</span>:
<a name="l01899"></a>01899     <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l01900"></a>01900     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> getProperty(<span class="keywordtype">int</span> propertyId, T* value)<span class="keyword"> const</span>
<a name="l01901"></a>01901 <span class="keyword">    </span>{
<a name="l01902"></a>01902         <span class="keywordflow">if</span> (!<a class="code" href="classopenni_1_1_camera_settings.html#afa314aa55a6554a51d3d9a8ef3defff7">isValid</a>()) <span class="keywordflow">return</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333adf334ec01f8b7b2d7a8593c488690475">STATUS_NOT_SUPPORTED</a>;
<a name="l01903"></a>01903 
<a name="l01904"></a>01904         <span class="keywordflow">return</span> m_pStream-&gt;<a class="code" href="classopenni_1_1_video_stream.html#adc8197276c332ce2afcf322de68e0e04">getProperty</a>&lt;T&gt;(propertyId, value);
<a name="l01905"></a>01905     }
<a name="l01906"></a>01906     <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l01907"></a>01907     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> setProperty(<span class="keywordtype">int</span> propertyId, <span class="keyword">const</span> T&amp; value)
<a name="l01908"></a>01908     {
<a name="l01909"></a>01909         <span class="keywordflow">if</span> (!<a class="code" href="classopenni_1_1_camera_settings.html#afa314aa55a6554a51d3d9a8ef3defff7">isValid</a>()) <span class="keywordflow">return</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333adf334ec01f8b7b2d7a8593c488690475">STATUS_NOT_SUPPORTED</a>;
<a name="l01910"></a>01910 
<a name="l01911"></a>01911         <span class="keywordflow">return</span> m_pStream-&gt;<a class="code" href="classopenni_1_1_video_stream.html#a72c23221468529cc97c6bde25fccce2c">setProperty</a>&lt;T&gt;(propertyId, value);
<a name="l01912"></a>01912     }
<a name="l01913"></a>01913 
<a name="l01914"></a><a class="code" href="classopenni_1_1_camera_settings.html#a4fd1028f691947151ea08e0db214f01c">01914</a>     <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classopenni_1_1_video_stream.html">VideoStream</a>;
<a name="l01915"></a>01915     <a class="code" href="classopenni_1_1_camera_settings.html">CameraSettings</a>(<a class="code" href="classopenni_1_1_video_stream.html">VideoStream</a>* pStream)
<a name="l01916"></a>01916     {
<a name="l01917"></a>01917         m_pStream = pStream;
<a name="l01918"></a>01918     }
<a name="l01919"></a>01919 
<a name="l01920"></a>01920     <a class="code" href="classopenni_1_1_video_stream.html">VideoStream</a>* m_pStream;
<a name="l01921"></a>01921 };
<a name="l01922"></a>01922 
<a name="l01923"></a>01923 
<a name="l01936"></a><a class="code" href="classopenni_1_1_open_n_i.html">01936</a> <span class="keyword">class </span><a class="code" href="classopenni_1_1_open_n_i.html">OpenNI</a>
<a name="l01937"></a>01937 {
<a name="l01938"></a>01938 <span class="keyword">public</span>:
<a name="l01939"></a>01939 
<a name="l01955"></a><a class="code" href="classopenni_1_1_open_n_i_1_1_device_connected_listener.html">01955</a>     <span class="keyword">class </span><a class="code" href="classopenni_1_1_open_n_i_1_1_device_connected_listener.html">DeviceConnectedListener</a>
<a name="l01956"></a>01956     {
<a name="l01957"></a>01957     <span class="keyword">public</span>:
<a name="l01958"></a><a class="code" href="classopenni_1_1_open_n_i_1_1_device_connected_listener.html#a71eda2ded9fd9334bf4ed424b1b27abc">01958</a>         <a class="code" href="classopenni_1_1_open_n_i_1_1_device_connected_listener.html#a71eda2ded9fd9334bf4ed424b1b27abc">DeviceConnectedListener</a>()
<a name="l01959"></a>01959         {
<a name="l01960"></a>01960             m_deviceConnectedCallbacks.deviceConnected = deviceConnectedCallback;
<a name="l01961"></a>01961             m_deviceConnectedCallbacks.deviceDisconnected = NULL;
<a name="l01962"></a>01962             m_deviceConnectedCallbacks.deviceStateChanged = NULL;
<a name="l01963"></a>01963             m_deviceConnectedCallbacksHandle = NULL;
<a name="l01964"></a>01964         }
<a name="l01965"></a>01965         
<a name="l01966"></a><a class="code" href="classopenni_1_1_open_n_i_1_1_device_connected_listener.html#a3abd73e0ab82e20356cfe18cf751ad93">01966</a>         <span class="keyword">virtual</span> <a class="code" href="classopenni_1_1_open_n_i_1_1_device_connected_listener.html#a3abd73e0ab82e20356cfe18cf751ad93">~DeviceConnectedListener</a>()
<a name="l01967"></a>01967         {
<a name="l01968"></a>01968         }
<a name="l01969"></a>01969         
<a name="l01981"></a>01981         <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classopenni_1_1_open_n_i_1_1_device_connected_listener.html#aba6dd6e8cad373476c7715453a7155fd">onDeviceConnected</a>(<span class="keyword">const</span> <a class="code" href="classopenni_1_1_device_info.html">DeviceInfo</a>*) = 0;
<a name="l01982"></a>01982     <span class="keyword">private</span>:
<a name="l01983"></a>01983         <span class="keyword">static</span> <span class="keywordtype">void</span> ONI_CALLBACK_TYPE deviceConnectedCallback(<span class="keyword">const</span> OniDeviceInfo* pInfo, <span class="keywordtype">void</span>* pCookie)
<a name="l01984"></a>01984         {
<a name="l01985"></a>01985             <a class="code" href="classopenni_1_1_open_n_i_1_1_device_connected_listener.html">DeviceConnectedListener</a>* pListener = (<a class="code" href="classopenni_1_1_open_n_i_1_1_device_connected_listener.html">DeviceConnectedListener</a>*)pCookie;
<a name="l01986"></a>01986             pListener-&gt;<a class="code" href="classopenni_1_1_open_n_i_1_1_device_connected_listener.html#aba6dd6e8cad373476c7715453a7155fd">onDeviceConnected</a>(static_cast&lt;const DeviceInfo*&gt;(pInfo));
<a name="l01987"></a>01987         }
<a name="l01988"></a>01988 
<a name="l01989"></a><a class="code" href="classopenni_1_1_open_n_i_1_1_device_connected_listener.html#a1d661a036b1e7e29b65f2b012bc92d00">01989</a>         <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classopenni_1_1_open_n_i.html">OpenNI</a>;
<a name="l01990"></a>01990         OniDeviceCallbacks m_deviceConnectedCallbacks;
<a name="l01991"></a>01991         OniCallbackHandle m_deviceConnectedCallbacksHandle;
<a name="l01992"></a>01992 
<a name="l01993"></a>01993     };
<a name="l02010"></a><a class="code" href="classopenni_1_1_open_n_i_1_1_device_disconnected_listener.html">02010</a>     <span class="keyword">class </span><a class="code" href="classopenni_1_1_open_n_i_1_1_device_disconnected_listener.html">DeviceDisconnectedListener</a>
<a name="l02011"></a>02011     {
<a name="l02012"></a>02012     <span class="keyword">public</span>:
<a name="l02013"></a><a class="code" href="classopenni_1_1_open_n_i_1_1_device_disconnected_listener.html#aad1e5260e540209672440d621c9cd6ed">02013</a>         <a class="code" href="classopenni_1_1_open_n_i_1_1_device_disconnected_listener.html#aad1e5260e540209672440d621c9cd6ed">DeviceDisconnectedListener</a>()
<a name="l02014"></a>02014         {
<a name="l02015"></a>02015             m_deviceDisconnectedCallbacks.deviceConnected = NULL;
<a name="l02016"></a>02016             m_deviceDisconnectedCallbacks.deviceDisconnected = deviceDisconnectedCallback;
<a name="l02017"></a>02017             m_deviceDisconnectedCallbacks.deviceStateChanged = NULL;
<a name="l02018"></a>02018             m_deviceDisconnectedCallbacksHandle = NULL;
<a name="l02019"></a>02019         }
<a name="l02020"></a>02020         
<a name="l02021"></a><a class="code" href="classopenni_1_1_open_n_i_1_1_device_disconnected_listener.html#abc423dee371c912301f0c71c7320bb8f">02021</a>         <span class="keyword">virtual</span> <a class="code" href="classopenni_1_1_open_n_i_1_1_device_disconnected_listener.html#abc423dee371c912301f0c71c7320bb8f">~DeviceDisconnectedListener</a>()
<a name="l02022"></a>02022         {
<a name="l02023"></a>02023         }
<a name="l02024"></a>02024         
<a name="l02033"></a>02033         <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classopenni_1_1_open_n_i_1_1_device_disconnected_listener.html#a93cce4849be363185d58867b63400057">onDeviceDisconnected</a>(<span class="keyword">const</span> <a class="code" href="classopenni_1_1_device_info.html">DeviceInfo</a>*) = 0;
<a name="l02034"></a>02034     <span class="keyword">private</span>:
<a name="l02035"></a>02035         <span class="keyword">static</span> <span class="keywordtype">void</span> ONI_CALLBACK_TYPE deviceDisconnectedCallback(<span class="keyword">const</span> OniDeviceInfo* pInfo, <span class="keywordtype">void</span>* pCookie)
<a name="l02036"></a>02036         {
<a name="l02037"></a>02037             <a class="code" href="classopenni_1_1_open_n_i_1_1_device_disconnected_listener.html">DeviceDisconnectedListener</a>* pListener = (<a class="code" href="classopenni_1_1_open_n_i_1_1_device_disconnected_listener.html">DeviceDisconnectedListener</a>*)pCookie;
<a name="l02038"></a>02038             pListener-&gt;<a class="code" href="classopenni_1_1_open_n_i_1_1_device_disconnected_listener.html#a93cce4849be363185d58867b63400057">onDeviceDisconnected</a>(static_cast&lt;const DeviceInfo*&gt;(pInfo));
<a name="l02039"></a>02039         }
<a name="l02040"></a>02040 
<a name="l02041"></a><a class="code" href="classopenni_1_1_open_n_i_1_1_device_disconnected_listener.html#a1d661a036b1e7e29b65f2b012bc92d00">02041</a>         <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classopenni_1_1_open_n_i.html">OpenNI</a>;
<a name="l02042"></a>02042         OniDeviceCallbacks m_deviceDisconnectedCallbacks;
<a name="l02043"></a>02043         OniCallbackHandle m_deviceDisconnectedCallbacksHandle;
<a name="l02044"></a>02044     };
<a name="l02058"></a><a class="code" href="classopenni_1_1_open_n_i_1_1_device_state_changed_listener.html">02058</a>     <span class="keyword">class </span><a class="code" href="classopenni_1_1_open_n_i_1_1_device_state_changed_listener.html">DeviceStateChangedListener</a>
<a name="l02059"></a>02059     {
<a name="l02060"></a>02060     <span class="keyword">public</span>:
<a name="l02061"></a><a class="code" href="classopenni_1_1_open_n_i_1_1_device_state_changed_listener.html#a66553a13dce2ffb59dc85d71f5104020">02061</a>         <a class="code" href="classopenni_1_1_open_n_i_1_1_device_state_changed_listener.html#a66553a13dce2ffb59dc85d71f5104020">DeviceStateChangedListener</a>()
<a name="l02062"></a>02062         {
<a name="l02063"></a>02063             m_deviceStateChangedCallbacks.deviceConnected = NULL;
<a name="l02064"></a>02064             m_deviceStateChangedCallbacks.deviceDisconnected = NULL;
<a name="l02065"></a>02065             m_deviceStateChangedCallbacks.deviceStateChanged = deviceStateChangedCallback;
<a name="l02066"></a>02066             m_deviceStateChangedCallbacksHandle = NULL;
<a name="l02067"></a>02067         }
<a name="l02068"></a>02068         
<a name="l02069"></a><a class="code" href="classopenni_1_1_open_n_i_1_1_device_state_changed_listener.html#ad388c57133ddb02c34e77af9266e0e13">02069</a>         <span class="keyword">virtual</span> <a class="code" href="classopenni_1_1_open_n_i_1_1_device_state_changed_listener.html#ad388c57133ddb02c34e77af9266e0e13">~DeviceStateChangedListener</a>()
<a name="l02070"></a>02070         {
<a name="l02071"></a>02071         }
<a name="l02072"></a>02072         
<a name="l02079"></a>02079         <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classopenni_1_1_open_n_i_1_1_device_state_changed_listener.html#a311b3d677811a45e247553ac02d932b7">onDeviceStateChanged</a>(<span class="keyword">const</span> <a class="code" href="classopenni_1_1_device_info.html">DeviceInfo</a>*, <a class="code" href="namespaceopenni.html#aeec58c3f4271cc66959b44fa27b10534">DeviceState</a>) = 0;
<a name="l02080"></a>02080     <span class="keyword">private</span>:
<a name="l02081"></a>02081         <span class="keyword">static</span> <span class="keywordtype">void</span> ONI_CALLBACK_TYPE deviceStateChangedCallback(<span class="keyword">const</span> OniDeviceInfo* pInfo, OniDeviceState state, <span class="keywordtype">void</span>* pCookie)
<a name="l02082"></a>02082         {
<a name="l02083"></a>02083             <a class="code" href="classopenni_1_1_open_n_i_1_1_device_state_changed_listener.html">DeviceStateChangedListener</a>* pListener = (<a class="code" href="classopenni_1_1_open_n_i_1_1_device_state_changed_listener.html">DeviceStateChangedListener</a>*)pCookie;
<a name="l02084"></a>02084             pListener-&gt;<a class="code" href="classopenni_1_1_open_n_i_1_1_device_state_changed_listener.html#a311b3d677811a45e247553ac02d932b7">onDeviceStateChanged</a>(static_cast&lt;const DeviceInfo*&gt;(pInfo), <a class="code" href="namespaceopenni.html#aeec58c3f4271cc66959b44fa27b10534">DeviceState</a>(state));
<a name="l02085"></a>02085         }
<a name="l02086"></a>02086 
<a name="l02087"></a><a class="code" href="classopenni_1_1_open_n_i_1_1_device_state_changed_listener.html#a1d661a036b1e7e29b65f2b012bc92d00">02087</a>         <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classopenni_1_1_open_n_i.html">OpenNI</a>;
<a name="l02088"></a>02088         OniDeviceCallbacks m_deviceStateChangedCallbacks;
<a name="l02089"></a>02089         OniCallbackHandle m_deviceStateChangedCallbacksHandle;
<a name="l02090"></a>02090     };
<a name="l02091"></a>02091 
<a name="l02097"></a><a class="code" href="classopenni_1_1_open_n_i.html#a0f374c05978a3373f1060c288997d8ca">02097</a>     <span class="keyword">static</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_open_n_i.html#a0f374c05978a3373f1060c288997d8ca">initialize</a>()
<a name="l02098"></a>02098     {
<a name="l02099"></a>02099         <span class="keywordflow">return</span> (<a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a>)oniInitialize(ONI_API_VERSION); <span class="comment">// provide version of API, to make sure proper struct sizes are used</span>
<a name="l02100"></a>02100     }
<a name="l02101"></a>02101 
<a name="l02106"></a><a class="code" href="classopenni_1_1_open_n_i.html#a1a3fb2a487849cc591373aa3f88a7edc">02106</a>     <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classopenni_1_1_open_n_i.html#a1a3fb2a487849cc591373aa3f88a7edc">shutdown</a>()
<a name="l02107"></a>02107     {
<a name="l02108"></a>02108         oniShutdown();
<a name="l02109"></a>02109     }
<a name="l02110"></a>02110 
<a name="l02114"></a><a class="code" href="classopenni_1_1_open_n_i.html#aab96e01582123921bdb223d936393d07">02114</a>     <span class="keyword">static</span> <a class="code" href="structopenni_1_1_version.html">Version</a> <a class="code" href="classopenni_1_1_open_n_i.html#aab96e01582123921bdb223d936393d07">getVersion</a>()
<a name="l02115"></a>02115     {
<a name="l02116"></a>02116         OniVersion oniVersion = oniGetVersion();
<a name="l02117"></a>02117         <a class="code" href="structopenni_1_1_version.html">Version</a> version;
<a name="l02118"></a>02118         version.<a class="code" href="structopenni_1_1_version.html#a5ae4a632961fa57459d2ba5e461dea5b">major</a> = oniVersion.major;
<a name="l02119"></a>02119         version.<a class="code" href="structopenni_1_1_version.html#aecc77ce1b6aa5866c7d5013d37fb1a5a">minor</a> = oniVersion.minor;
<a name="l02120"></a>02120         version.<a class="code" href="structopenni_1_1_version.html#a975d3371cc404eb34bf17c97c09bd0b3">maintenance</a> = oniVersion.maintenance;
<a name="l02121"></a>02121         version.<a class="code" href="structopenni_1_1_version.html#a79f9cb7e9a828a3303c55498767f332e">build</a> = oniVersion.build;
<a name="l02122"></a>02122         <span class="keywordflow">return</span> version;
<a name="l02123"></a>02123     }
<a name="l02124"></a>02124 
<a name="l02132"></a><a class="code" href="classopenni_1_1_open_n_i.html#a01fd4df5c93eaf9a9437bbc4c942130a">02132</a>     <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="classopenni_1_1_open_n_i.html#a01fd4df5c93eaf9a9437bbc4c942130a">getExtendedError</a>()
<a name="l02133"></a>02133     {
<a name="l02134"></a>02134         <span class="keywordflow">return</span> oniGetExtendedError();
<a name="l02135"></a>02135     }
<a name="l02136"></a>02136 
<a name="l02141"></a><a class="code" href="classopenni_1_1_open_n_i.html#aef1804963ffbe476be41f9c2c09ee99e">02141</a>     <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classopenni_1_1_open_n_i.html#aef1804963ffbe476be41f9c2c09ee99e">enumerateDevices</a>(<a class="code" href="classopenni_1_1_array.html">Array&lt;DeviceInfo&gt;</a>* deviceInfoList)
<a name="l02142"></a>02142     {
<a name="l02143"></a>02143         OniDeviceInfo* m_pDeviceInfos;
<a name="l02144"></a>02144         <span class="keywordtype">int</span> m_deviceInfoCount;
<a name="l02145"></a>02145         oniGetDeviceList(&amp;m_pDeviceInfos, &amp;m_deviceInfoCount);
<a name="l02146"></a>02146         deviceInfoList-&gt;_setData((<a class="code" href="classopenni_1_1_device_info.html">DeviceInfo</a>*)m_pDeviceInfos, m_deviceInfoCount, <span class="keyword">true</span>);
<a name="l02147"></a>02147         oniReleaseDeviceList(m_pDeviceInfos);
<a name="l02148"></a>02148     }
<a name="l02149"></a>02149 
<a name="l02158"></a><a class="code" href="classopenni_1_1_open_n_i.html#ad0e287ef86221db74055c3e928c9adf2">02158</a>     <span class="keyword">static</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_open_n_i.html#ad0e287ef86221db74055c3e928c9adf2">waitForAnyStream</a>(<a class="code" href="classopenni_1_1_video_stream.html">VideoStream</a>** pStreams, <span class="keywordtype">int</span> streamCount, <span class="keywordtype">int</span>* pReadyStreamIndex, <span class="keywordtype">int</span> timeout = <a class="code" href="namespaceopenni.html#a606771f15b60eaf092fa71378787bd66">TIMEOUT_FOREVER</a>)
<a name="l02159"></a>02159     {
<a name="l02160"></a>02160         <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> ONI_MAX_STREAMS = 50;
<a name="l02161"></a>02161         OniStreamHandle streams[ONI_MAX_STREAMS];
<a name="l02162"></a>02162 
<a name="l02163"></a>02163         <span class="keywordflow">if</span> (streamCount &gt; ONI_MAX_STREAMS)
<a name="l02164"></a>02164         {
<a name="l02165"></a>02165             printf(<span class="stringliteral">&quot;Too many streams for wait: %d &gt; %d\n&quot;</span>, streamCount, ONI_MAX_STREAMS);
<a name="l02166"></a>02166             <span class="keywordflow">return</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333ac9368d475a09338730d0c93ffb5cdcb4">STATUS_BAD_PARAMETER</a>;
<a name="l02167"></a>02167         }
<a name="l02168"></a>02168 
<a name="l02169"></a>02169         *pReadyStreamIndex = -1;
<a name="l02170"></a>02170         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; streamCount; ++i)
<a name="l02171"></a>02171         {
<a name="l02172"></a>02172             <span class="keywordflow">if</span> (pStreams[i] != NULL)
<a name="l02173"></a>02173             {
<a name="l02174"></a>02174                 streams[i] = pStreams[i]-&gt;_getHandle();
<a name="l02175"></a>02175             }
<a name="l02176"></a>02176             <span class="keywordflow">else</span>
<a name="l02177"></a>02177             {
<a name="l02178"></a>02178                 streams[i] = NULL;
<a name="l02179"></a>02179             }
<a name="l02180"></a>02180         }
<a name="l02181"></a>02181         <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> rc = (<a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a>)oniWaitForAnyStream(streams, streamCount, pReadyStreamIndex, timeout);
<a name="l02182"></a>02182 
<a name="l02183"></a>02183         <span class="keywordflow">return</span> rc;
<a name="l02184"></a>02184     }
<a name="l02185"></a>02185 
<a name="l02193"></a><a class="code" href="classopenni_1_1_open_n_i.html#a134e63dd470532118c4d9d06496fa910">02193</a>     <span class="keyword">static</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_open_n_i.html#a134e63dd470532118c4d9d06496fa910">addDeviceConnectedListener</a>(<a class="code" href="classopenni_1_1_open_n_i_1_1_device_connected_listener.html">DeviceConnectedListener</a>* pListener)
<a name="l02194"></a>02194     {
<a name="l02195"></a>02195         <span class="keywordflow">if</span> (pListener-&gt;m_deviceConnectedCallbacksHandle != NULL)
<a name="l02196"></a>02196         {
<a name="l02197"></a>02197             <span class="keywordflow">return</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333a3b91bb9ad4a7c004eafb21f10de74346">STATUS_ERROR</a>;
<a name="l02198"></a>02198         }
<a name="l02199"></a>02199         <span class="keywordflow">return</span> (<a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a>)oniRegisterDeviceCallbacks(&amp;pListener-&gt;m_deviceConnectedCallbacks, pListener, &amp;pListener-&gt;m_deviceConnectedCallbacksHandle);
<a name="l02200"></a>02200     }
<a name="l02208"></a><a class="code" href="classopenni_1_1_open_n_i.html#a92e84cbd6623beb7bc7438ab3e499a15">02208</a>     <span class="keyword">static</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_open_n_i.html#a92e84cbd6623beb7bc7438ab3e499a15">addDeviceDisconnectedListener</a>(<a class="code" href="classopenni_1_1_open_n_i_1_1_device_disconnected_listener.html">DeviceDisconnectedListener</a>* pListener)
<a name="l02209"></a>02209     {
<a name="l02210"></a>02210         <span class="keywordflow">if</span> (pListener-&gt;m_deviceDisconnectedCallbacksHandle != NULL)
<a name="l02211"></a>02211         {
<a name="l02212"></a>02212             <span class="keywordflow">return</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333a3b91bb9ad4a7c004eafb21f10de74346">STATUS_ERROR</a>;
<a name="l02213"></a>02213         }
<a name="l02214"></a>02214         <span class="keywordflow">return</span> (<a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a>)oniRegisterDeviceCallbacks(&amp;pListener-&gt;m_deviceDisconnectedCallbacks, pListener, &amp;pListener-&gt;m_deviceDisconnectedCallbacksHandle);
<a name="l02215"></a>02215     }
<a name="l02223"></a><a class="code" href="classopenni_1_1_open_n_i.html#aa810e1ed0639e76d90d6b110283518d3">02223</a>     <span class="keyword">static</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_open_n_i.html#aa810e1ed0639e76d90d6b110283518d3">addDeviceStateChangedListener</a>(<a class="code" href="classopenni_1_1_open_n_i_1_1_device_state_changed_listener.html">DeviceStateChangedListener</a>* pListener)
<a name="l02224"></a>02224     {
<a name="l02225"></a>02225         <span class="keywordflow">if</span> (pListener-&gt;m_deviceStateChangedCallbacksHandle != NULL)
<a name="l02226"></a>02226         {
<a name="l02227"></a>02227             <span class="keywordflow">return</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333a3b91bb9ad4a7c004eafb21f10de74346">STATUS_ERROR</a>;
<a name="l02228"></a>02228         }
<a name="l02229"></a>02229         <span class="keywordflow">return</span> (<a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a>)oniRegisterDeviceCallbacks(&amp;pListener-&gt;m_deviceStateChangedCallbacks, pListener, &amp;pListener-&gt;m_deviceStateChangedCallbacksHandle);
<a name="l02230"></a>02230     }
<a name="l02238"></a><a class="code" href="classopenni_1_1_open_n_i.html#a350f5989882cbf4b29dbbcae42003f54">02238</a>     <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classopenni_1_1_open_n_i.html#a350f5989882cbf4b29dbbcae42003f54">removeDeviceConnectedListener</a>(<a class="code" href="classopenni_1_1_open_n_i_1_1_device_connected_listener.html">DeviceConnectedListener</a>* pListener)
<a name="l02239"></a>02239     {
<a name="l02240"></a>02240         oniUnregisterDeviceCallbacks(pListener-&gt;m_deviceConnectedCallbacksHandle);
<a name="l02241"></a>02241         pListener-&gt;m_deviceConnectedCallbacksHandle = NULL;
<a name="l02242"></a>02242     }
<a name="l02250"></a><a class="code" href="classopenni_1_1_open_n_i.html#af68edcf05f1e50f620c13d5fb393f105">02250</a>     <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classopenni_1_1_open_n_i.html#af68edcf05f1e50f620c13d5fb393f105">removeDeviceDisconnectedListener</a>(<a class="code" href="classopenni_1_1_open_n_i_1_1_device_disconnected_listener.html">DeviceDisconnectedListener</a>* pListener)
<a name="l02251"></a>02251     {
<a name="l02252"></a>02252         oniUnregisterDeviceCallbacks(pListener-&gt;m_deviceDisconnectedCallbacksHandle);
<a name="l02253"></a>02253         pListener-&gt;m_deviceDisconnectedCallbacksHandle = NULL;
<a name="l02254"></a>02254     }
<a name="l02262"></a><a class="code" href="classopenni_1_1_open_n_i.html#acab32726b8f7b9a2d7619ce9be3b7da2">02262</a>     <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classopenni_1_1_open_n_i.html#acab32726b8f7b9a2d7619ce9be3b7da2">removeDeviceStateChangedListener</a>(<a class="code" href="classopenni_1_1_open_n_i_1_1_device_state_changed_listener.html">DeviceStateChangedListener</a>* pListener)
<a name="l02263"></a>02263     {
<a name="l02264"></a>02264         oniUnregisterDeviceCallbacks(pListener-&gt;m_deviceStateChangedCallbacksHandle);
<a name="l02265"></a>02265         pListener-&gt;m_deviceStateChangedCallbacksHandle = NULL;
<a name="l02266"></a>02266     }
<a name="l02267"></a>02267 
<a name="l02276"></a><a class="code" href="classopenni_1_1_open_n_i.html#a5082d1b0c3d62c6ed41925cc569acb01">02276</a>     <span class="keyword">static</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_open_n_i.html#a5082d1b0c3d62c6ed41925cc569acb01">setLogOutputFolder</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *strLogOutputFolder)
<a name="l02277"></a>02277     {
<a name="l02278"></a>02278         <span class="keywordflow">return</span> (<a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a>)oniSetLogOutputFolder(strLogOutputFolder);
<a name="l02279"></a>02279     }
<a name="l02280"></a>02280 
<a name="l02290"></a><a class="code" href="classopenni_1_1_open_n_i.html#ae543a75628401c022d8fc27793d99833">02290</a>     <span class="keyword">static</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_open_n_i.html#ae543a75628401c022d8fc27793d99833">getLogFileName</a>(<span class="keywordtype">char</span> *strFileName, <span class="keywordtype">int</span> nBufferSize)
<a name="l02291"></a>02291     {
<a name="l02292"></a>02292         <span class="keywordflow">return</span> (<a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a>)oniGetLogFileName(strFileName, nBufferSize);
<a name="l02293"></a>02293     }
<a name="l02294"></a>02294 
<a name="l02304"></a><a class="code" href="classopenni_1_1_open_n_i.html#a4f27c310b99a9b0c28793d460bf44133">02304</a>     <span class="keyword">static</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_open_n_i.html#a4f27c310b99a9b0c28793d460bf44133">setLogMinSeverity</a>(<span class="keywordtype">int</span> nMinSeverity)
<a name="l02305"></a>02305     {
<a name="l02306"></a>02306         <span class="keywordflow">return</span>(<a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a>) oniSetLogMinSeverity(nMinSeverity);
<a name="l02307"></a>02307     }
<a name="l02308"></a>02308     
<a name="l02317"></a><a class="code" href="classopenni_1_1_open_n_i.html#a14a299005452e957ccf3703d15b0a96a">02317</a>     <span class="keyword">static</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_open_n_i.html#a14a299005452e957ccf3703d15b0a96a">setLogConsoleOutput</a>(<span class="keywordtype">bool</span> bConsoleOutput)
<a name="l02318"></a>02318     {
<a name="l02319"></a>02319         <span class="keywordflow">return</span> (<a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a>)oniSetLogConsoleOutput(bConsoleOutput);
<a name="l02320"></a>02320     }
<a name="l02321"></a>02321 
<a name="l02330"></a><a class="code" href="classopenni_1_1_open_n_i.html#a5fe6e70302953a684f6198dbfa8f24e3">02330</a>     <span class="keyword">static</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_open_n_i.html#a5fe6e70302953a684f6198dbfa8f24e3">setLogFileOutput</a>(<span class="keywordtype">bool</span> bFileOutput)
<a name="l02331"></a>02331     {
<a name="l02332"></a>02332         <span class="keywordflow">return</span> (<a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a>)oniSetLogFileOutput(bFileOutput);
<a name="l02333"></a>02333     }
<a name="l02334"></a>02334 
<a name="l02335"></a>02335 <span class="preprocessor">    #if ONI_PLATFORM == ONI_PLATFORM_ANDROID_ARM</span>
<a name="l02336"></a>02336 <span class="preprocessor"></span>
<a name="l02345"></a>02345     <span class="keyword">static</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> setLogAndroidOutput(<span class="keywordtype">bool</span> bAndroidOutput)
<a name="l02346"></a>02346     {
<a name="l02347"></a>02347         <span class="keywordflow">return</span> (<a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a>)oniSetLogAndroidOutput(bAndroidOutput);
<a name="l02348"></a>02348     }
<a name="l02349"></a>02349 <span class="preprocessor">    #endif</span>
<a name="l02350"></a>02350 <span class="preprocessor"></span>    
<a name="l02351"></a>02351 <span class="keyword">private</span>:
<a name="l02352"></a>02352     OpenNI()
<a name="l02353"></a>02353     {
<a name="l02354"></a>02354     }
<a name="l02355"></a>02355 };
<a name="l02356"></a>02356 
<a name="l02392"></a><a class="code" href="classopenni_1_1_coordinate_converter.html">02392</a> <span class="keyword">class </span><a class="code" href="classopenni_1_1_coordinate_converter.html">CoordinateConverter</a>
<a name="l02393"></a>02393 {
<a name="l02394"></a>02394 <span class="keyword">public</span>:
<a name="l02405"></a><a class="code" href="classopenni_1_1_coordinate_converter.html#a38b9a3f31f62ebd8664f4f8a1fd26704">02405</a>     <span class="keyword">static</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_coordinate_converter.html#a38b9a3f31f62ebd8664f4f8a1fd26704">convertWorldToDepth</a>(<span class="keyword">const</span> <a class="code" href="classopenni_1_1_video_stream.html">VideoStream</a>&amp; depthStream, <span class="keywordtype">float</span> worldX, <span class="keywordtype">float</span> worldY, <span class="keywordtype">float</span> worldZ, <span class="keywordtype">int</span>* pDepthX, <span class="keywordtype">int</span>* pDepthY, <a class="code" href="namespaceopenni.html#ab2403242071ff06fc6fe18c0c6111d0f">DepthPixel</a>* pDepthZ)
<a name="l02406"></a>02406     {
<a name="l02407"></a>02407         <span class="keywordtype">float</span> depthX, depthY, depthZ;
<a name="l02408"></a>02408         <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> rc = (<a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a>)oniCoordinateConverterWorldToDepth(depthStream._getHandle(), worldX, worldY, worldZ, &amp;depthX, &amp;depthY, &amp;depthZ);
<a name="l02409"></a>02409         *pDepthX = (int)depthX;
<a name="l02410"></a>02410         *pDepthY = (int)depthY;
<a name="l02411"></a>02411         *pDepthZ = (<a class="code" href="namespaceopenni.html#ab2403242071ff06fc6fe18c0c6111d0f">DepthPixel</a>)depthZ;
<a name="l02412"></a>02412         <span class="keywordflow">return</span> rc;
<a name="l02413"></a>02413     }
<a name="l02414"></a>02414 
<a name="l02425"></a><a class="code" href="classopenni_1_1_coordinate_converter.html#a8a68229388b168a836c3fe709f2ef953">02425</a>     <span class="keyword">static</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_coordinate_converter.html#a38b9a3f31f62ebd8664f4f8a1fd26704">convertWorldToDepth</a>(<span class="keyword">const</span> <a class="code" href="classopenni_1_1_video_stream.html">VideoStream</a>&amp; depthStream, <span class="keywordtype">float</span> worldX, <span class="keywordtype">float</span> worldY, <span class="keywordtype">float</span> worldZ, <span class="keywordtype">float</span>* pDepthX, <span class="keywordtype">float</span>* pDepthY, <span class="keywordtype">float</span>* pDepthZ)
<a name="l02426"></a>02426     {
<a name="l02427"></a>02427         <span class="keywordflow">return</span> (<a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a>)oniCoordinateConverterWorldToDepth(depthStream._getHandle(), worldX, worldY, worldZ, pDepthX, pDepthY, pDepthZ);
<a name="l02428"></a>02428     }
<a name="l02429"></a>02429 
<a name="l02440"></a><a class="code" href="classopenni_1_1_coordinate_converter.html#a3129cdc99f37c8084ddb27849702b1dc">02440</a>     <span class="keyword">static</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_coordinate_converter.html#a3129cdc99f37c8084ddb27849702b1dc">convertDepthToWorld</a>(<span class="keyword">const</span> <a class="code" href="classopenni_1_1_video_stream.html">VideoStream</a>&amp; depthStream, <span class="keywordtype">int</span> depthX, <span class="keywordtype">int</span> depthY, <a class="code" href="namespaceopenni.html#ab2403242071ff06fc6fe18c0c6111d0f">DepthPixel</a> depthZ, <span class="keywordtype">float</span>* pWorldX, <span class="keywordtype">float</span>* pWorldY, <span class="keywordtype">float</span>* pWorldZ)
<a name="l02441"></a>02441     {
<a name="l02442"></a>02442         <span class="keywordflow">return</span> (<a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a>)oniCoordinateConverterDepthToWorld(depthStream._getHandle(), float(depthX), float(depthY), float(depthZ), pWorldX, pWorldY, pWorldZ);
<a name="l02443"></a>02443     }
<a name="l02444"></a>02444 
<a name="l02455"></a><a class="code" href="classopenni_1_1_coordinate_converter.html#a5d934a92602a069c703c0640cd776aeb">02455</a>     <span class="keyword">static</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_coordinate_converter.html#a3129cdc99f37c8084ddb27849702b1dc">convertDepthToWorld</a>(<span class="keyword">const</span> <a class="code" href="classopenni_1_1_video_stream.html">VideoStream</a>&amp; depthStream, <span class="keywordtype">float</span> depthX, <span class="keywordtype">float</span> depthY, <span class="keywordtype">float</span> depthZ, <span class="keywordtype">float</span>* pWorldX, <span class="keywordtype">float</span>* pWorldY, <span class="keywordtype">float</span>* pWorldZ)
<a name="l02456"></a>02456     {
<a name="l02457"></a>02457         <span class="keywordflow">return</span> (<a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a>)oniCoordinateConverterDepthToWorld(depthStream._getHandle(), depthX, depthY, depthZ, pWorldX, pWorldY, pWorldZ);
<a name="l02458"></a>02458     }
<a name="l02459"></a>02459 
<a name="l02471"></a><a class="code" href="classopenni_1_1_coordinate_converter.html#a4faabf558f2eb6e27948e50bffa8f581">02471</a>     <span class="keyword">static</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_coordinate_converter.html#a4faabf558f2eb6e27948e50bffa8f581">convertDepthToColor</a>(<span class="keyword">const</span> <a class="code" href="classopenni_1_1_video_stream.html">VideoStream</a>&amp; depthStream, <span class="keyword">const</span> <a class="code" href="classopenni_1_1_video_stream.html">VideoStream</a>&amp; colorStream, <span class="keywordtype">int</span> depthX, <span class="keywordtype">int</span> depthY, <a class="code" href="namespaceopenni.html#ab2403242071ff06fc6fe18c0c6111d0f">DepthPixel</a> depthZ, <span class="keywordtype">int</span>* pColorX, <span class="keywordtype">int</span>* pColorY)
<a name="l02472"></a>02472     {
<a name="l02473"></a>02473         <span class="keywordflow">return</span> (<a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a>)oniCoordinateConverterDepthToColor(depthStream._getHandle(), colorStream._getHandle(), depthX, depthY, depthZ, pColorX, pColorY);
<a name="l02474"></a>02474     }
<a name="l02475"></a>02475 };
<a name="l02476"></a>02476 
<a name="l02491"></a><a class="code" href="classopenni_1_1_recorder.html">02491</a> <span class="keyword">class </span><a class="code" href="classopenni_1_1_recorder.html">Recorder</a>
<a name="l02492"></a>02492 {
<a name="l02493"></a>02493 <span class="keyword">public</span>:
<a name="l02498"></a><a class="code" href="classopenni_1_1_recorder.html#a868e9145d222d3c17c5e0a684f6b247c">02498</a>     <a class="code" href="classopenni_1_1_recorder.html#a868e9145d222d3c17c5e0a684f6b247c">Recorder</a>() : m_recorder(NULL)
<a name="l02499"></a>02499     {
<a name="l02500"></a>02500     }
<a name="l02501"></a>02501 
<a name="l02505"></a><a class="code" href="classopenni_1_1_recorder.html#a4452268d371108c3b670d7527efae3d0">02505</a>     <a class="code" href="classopenni_1_1_recorder.html#a4452268d371108c3b670d7527efae3d0">~Recorder</a>()
<a name="l02506"></a>02506     {
<a name="l02507"></a>02507         <a class="code" href="classopenni_1_1_recorder.html#a66e242dbe35907e9ecdbb516532ed347">destroy</a>();
<a name="l02508"></a>02508     }
<a name="l02509"></a>02509 
<a name="l02521"></a><a class="code" href="classopenni_1_1_recorder.html#a7e0865a077fcc968427977d2063884ec">02521</a>     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_recorder.html#a7e0865a077fcc968427977d2063884ec">create</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* fileName)
<a name="l02522"></a>02522     {
<a name="l02523"></a>02523         <span class="keywordflow">if</span> (!<a class="code" href="classopenni_1_1_recorder.html#a20d2a025db00aa3f27c4d864c2587d91">isValid</a>())
<a name="l02524"></a>02524         {
<a name="l02525"></a>02525             <span class="keywordflow">return</span> (<a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a>)oniCreateRecorder(fileName, &amp;m_recorder);
<a name="l02526"></a>02526         }
<a name="l02527"></a>02527         <span class="keywordflow">return</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333a3b91bb9ad4a7c004eafb21f10de74346">STATUS_ERROR</a>;
<a name="l02528"></a>02528     }
<a name="l02529"></a>02529 
<a name="l02536"></a><a class="code" href="classopenni_1_1_recorder.html#a20d2a025db00aa3f27c4d864c2587d91">02536</a>     <span class="keywordtype">bool</span> <a class="code" href="classopenni_1_1_recorder.html#a20d2a025db00aa3f27c4d864c2587d91">isValid</a>()<span class="keyword"> const</span>
<a name="l02537"></a>02537 <span class="keyword">    </span>{
<a name="l02538"></a>02538         <span class="keywordflow">return</span> NULL != getHandle();
<a name="l02539"></a>02539     }
<a name="l02540"></a>02540 
<a name="l02551"></a><a class="code" href="classopenni_1_1_recorder.html#ab5351b4642fd738147feca2d7e5e2565">02551</a>     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_recorder.html#ab5351b4642fd738147feca2d7e5e2565">attach</a>(<a class="code" href="classopenni_1_1_video_stream.html">VideoStream</a>&amp; stream, <span class="keywordtype">bool</span> allowLossyCompression = <span class="keyword">false</span>)
<a name="l02552"></a>02552     {
<a name="l02553"></a>02553         <span class="keywordflow">if</span> (!<a class="code" href="classopenni_1_1_recorder.html#a20d2a025db00aa3f27c4d864c2587d91">isValid</a>() || !stream.<a class="code" href="classopenni_1_1_video_stream.html#ae187f95f14461215fed421a3d6a66625">isValid</a>())
<a name="l02554"></a>02554         {
<a name="l02555"></a>02555             <span class="keywordflow">return</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333a3b91bb9ad4a7c004eafb21f10de74346">STATUS_ERROR</a>;
<a name="l02556"></a>02556         }
<a name="l02557"></a>02557         <span class="keywordflow">return</span> (<a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a>)oniRecorderAttachStream(
<a name="l02558"></a>02558                 m_recorder,
<a name="l02559"></a>02559                 stream._getHandle(),
<a name="l02560"></a>02560                 allowLossyCompression);
<a name="l02561"></a>02561     }
<a name="l02562"></a>02562 
<a name="l02569"></a><a class="code" href="classopenni_1_1_recorder.html#af9e22ae7bb59250cf97db34cf067da5a">02569</a>     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_recorder.html#af9e22ae7bb59250cf97db34cf067da5a">start</a>()
<a name="l02570"></a>02570     {
<a name="l02571"></a>02571         <span class="keywordflow">if</span> (!<a class="code" href="classopenni_1_1_recorder.html#a20d2a025db00aa3f27c4d864c2587d91">isValid</a>())
<a name="l02572"></a>02572         {
<a name="l02573"></a>02573             <span class="keywordflow">return</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333a3b91bb9ad4a7c004eafb21f10de74346">STATUS_ERROR</a>;
<a name="l02574"></a>02574         }
<a name="l02575"></a>02575         <span class="keywordflow">return</span> (<a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a>)oniRecorderStart(m_recorder);
<a name="l02576"></a>02576     }
<a name="l02577"></a>02577 
<a name="l02581"></a><a class="code" href="classopenni_1_1_recorder.html#a5912dcb5b76623a1bfdc53e97fe9dc03">02581</a>     <span class="keywordtype">void</span> <a class="code" href="classopenni_1_1_recorder.html#a5912dcb5b76623a1bfdc53e97fe9dc03">stop</a>()
<a name="l02582"></a>02582     {
<a name="l02583"></a>02583         <span class="keywordflow">if</span> (<a class="code" href="classopenni_1_1_recorder.html#a20d2a025db00aa3f27c4d864c2587d91">isValid</a>())
<a name="l02584"></a>02584         {
<a name="l02585"></a>02585             oniRecorderStop(m_recorder);
<a name="l02586"></a>02586         }
<a name="l02587"></a>02587     }
<a name="l02588"></a>02588 
<a name="l02592"></a><a class="code" href="classopenni_1_1_recorder.html#a66e242dbe35907e9ecdbb516532ed347">02592</a>     <span class="keywordtype">void</span> <a class="code" href="classopenni_1_1_recorder.html#a66e242dbe35907e9ecdbb516532ed347">destroy</a>()
<a name="l02593"></a>02593     {
<a name="l02594"></a>02594         <span class="keywordflow">if</span> (<a class="code" href="classopenni_1_1_recorder.html#a20d2a025db00aa3f27c4d864c2587d91">isValid</a>())
<a name="l02595"></a>02595         {
<a name="l02596"></a>02596             oniRecorderDestroy(&amp;m_recorder);
<a name="l02597"></a>02597         }
<a name="l02598"></a>02598     }
<a name="l02599"></a>02599 
<a name="l02600"></a>02600 <span class="keyword">private</span>:
<a name="l02601"></a>02601     <a class="code" href="classopenni_1_1_recorder.html#a868e9145d222d3c17c5e0a684f6b247c">Recorder</a>(<span class="keyword">const</span> <a class="code" href="classopenni_1_1_recorder.html">Recorder</a>&amp;);
<a name="l02602"></a>02602     <a class="code" href="classopenni_1_1_recorder.html">Recorder</a>&amp; operator=(<span class="keyword">const</span> <a class="code" href="classopenni_1_1_recorder.html">Recorder</a>&amp;);
<a name="l02603"></a>02603 
<a name="l02607"></a>02607     OniRecorderHandle getHandle()<span class="keyword"> const</span>
<a name="l02608"></a>02608 <span class="keyword">    </span>{
<a name="l02609"></a>02609         <span class="keywordflow">return</span> m_recorder;
<a name="l02610"></a>02610     }
<a name="l02611"></a>02611 
<a name="l02612"></a>02612 
<a name="l02613"></a>02613     OniRecorderHandle m_recorder;
<a name="l02614"></a>02614 };
<a name="l02615"></a>02615 
<a name="l02616"></a>02616 <span class="comment">// Implemetation</span>
<a name="l02617"></a><a class="code" href="classopenni_1_1_video_stream.html#a171b2f72e383903ee7787697b26017ae">02617</a> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_video_stream.html#a171b2f72e383903ee7787697b26017ae">VideoStream::create</a>(<span class="keyword">const</span> <a class="code" href="classopenni_1_1_device.html">Device</a>&amp; device, <a class="code" href="namespaceopenni.html#a50658bbbf9f6e9e57aa6ebdb768fd8c2">SensorType</a> sensorType)
<a name="l02618"></a>02618 {
<a name="l02619"></a>02619     OniStreamHandle streamHandle;
<a name="l02620"></a>02620     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> rc = (<a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a>)oniDeviceCreateStream(device._getHandle(), (OniSensorType)sensorType, &amp;streamHandle);
<a name="l02621"></a>02621     <span class="keywordflow">if</span> (rc != <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333ac4a1d7871ca526614cc705cd34b67367">STATUS_OK</a>)
<a name="l02622"></a>02622     {
<a name="l02623"></a>02623         <span class="keywordflow">return</span> rc;
<a name="l02624"></a>02624     }
<a name="l02625"></a>02625 
<a name="l02626"></a>02626     m_isOwner = <span class="keyword">true</span>;
<a name="l02627"></a>02627     _setHandle(streamHandle);
<a name="l02628"></a>02628 
<a name="l02629"></a>02629     <span class="keywordflow">if</span> (<a class="code" href="classopenni_1_1_video_stream.html#acd1b875ad4fe267deed85f540e33c30d">isPropertySupported</a>(STREAM_PROPERTY_AUTO_WHITE_BALANCE) &amp;&amp; <a class="code" href="classopenni_1_1_video_stream.html#acd1b875ad4fe267deed85f540e33c30d">isPropertySupported</a>(STREAM_PROPERTY_AUTO_EXPOSURE))
<a name="l02630"></a>02630     {
<a name="l02631"></a>02631         m_pCameraSettings = <span class="keyword">new</span> <a class="code" href="classopenni_1_1_camera_settings.html">CameraSettings</a>(<span class="keyword">this</span>);
<a name="l02632"></a>02632     }
<a name="l02633"></a>02633 
<a name="l02634"></a>02634     <span class="keywordflow">return</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333ac4a1d7871ca526614cc705cd34b67367">STATUS_OK</a>;
<a name="l02635"></a>02635 }
<a name="l02636"></a>02636 
<a name="l02637"></a><a class="code" href="classopenni_1_1_video_stream.html#ae10d69b147fe098c3dc9cb0bfde415ed">02637</a> <span class="keywordtype">void</span> <a class="code" href="classopenni_1_1_video_stream.html#ae10d69b147fe098c3dc9cb0bfde415ed">VideoStream::destroy</a>()
<a name="l02638"></a>02638 {
<a name="l02639"></a>02639     <span class="keywordflow">if</span> (!<a class="code" href="classopenni_1_1_video_stream.html#ae187f95f14461215fed421a3d6a66625">isValid</a>())
<a name="l02640"></a>02640     {
<a name="l02641"></a>02641         <span class="keywordflow">return</span>;
<a name="l02642"></a>02642     }
<a name="l02643"></a>02643 
<a name="l02644"></a>02644     <span class="keywordflow">if</span> (m_pCameraSettings != NULL)
<a name="l02645"></a>02645     {
<a name="l02646"></a>02646         <span class="keyword">delete</span> m_pCameraSettings;
<a name="l02647"></a>02647         m_pCameraSettings = NULL;
<a name="l02648"></a>02648     }
<a name="l02649"></a>02649 
<a name="l02650"></a>02650     <span class="keywordflow">if</span> (m_stream != NULL)
<a name="l02651"></a>02651     {
<a name="l02652"></a>02652         <span class="keywordflow">if</span>(m_isOwner)
<a name="l02653"></a>02653             oniStreamDestroy(m_stream);
<a name="l02654"></a>02654         m_stream = NULL;
<a name="l02655"></a>02655     }
<a name="l02656"></a>02656 }
<a name="l02657"></a>02657 
<a name="l02658"></a><a class="code" href="classopenni_1_1_device.html#a2240eaf483ea04506f320f3cd963ca62">02658</a> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_device.html#a2240eaf483ea04506f320f3cd963ca62">Device::open</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* uri)
<a name="l02659"></a>02659 {
<a name="l02660"></a>02660     <span class="comment">//If we are not the owners, we stick with our own device</span>
<a name="l02661"></a>02661     <span class="keywordflow">if</span>(!m_isOwner)
<a name="l02662"></a>02662     {
<a name="l02663"></a>02663         <span class="keywordflow">if</span>(<a class="code" href="classopenni_1_1_device.html#a17435124df6c3c795fe9ff160fbeff74">isValid</a>()){
<a name="l02664"></a>02664             <span class="keywordflow">return</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333ac4a1d7871ca526614cc705cd34b67367">STATUS_OK</a>;
<a name="l02665"></a>02665         }<span class="keywordflow">else</span>{
<a name="l02666"></a>02666             <span class="keywordflow">return</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333a0210e71f7ee8690aed5ae1ce961e690b">STATUS_OUT_OF_FLOW</a>;
<a name="l02667"></a>02667         }
<a name="l02668"></a>02668     }
<a name="l02669"></a>02669 
<a name="l02670"></a>02670     OniDeviceHandle deviceHandle;
<a name="l02671"></a>02671     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> rc = (<a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a>)oniDeviceOpen(uri, &amp;deviceHandle);
<a name="l02672"></a>02672     <span class="keywordflow">if</span> (rc != <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333ac4a1d7871ca526614cc705cd34b67367">STATUS_OK</a>)
<a name="l02673"></a>02673     {
<a name="l02674"></a>02674         <span class="keywordflow">return</span> rc;
<a name="l02675"></a>02675     }
<a name="l02676"></a>02676 
<a name="l02677"></a>02677     _setHandle(deviceHandle);
<a name="l02678"></a>02678 
<a name="l02679"></a>02679     <span class="keywordflow">return</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333ac4a1d7871ca526614cc705cd34b67367">STATUS_OK</a>;
<a name="l02680"></a>02680 }
<a name="l02681"></a>02681 
<a name="l02682"></a>02682 <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> Device::_openEx(<span class="keyword">const</span> <span class="keywordtype">char</span>* uri, <span class="keyword">const</span> <span class="keywordtype">char</span>* mode)
<a name="l02683"></a>02683 {
<a name="l02684"></a>02684     <span class="comment">//If we are not the owners, we stick with our own device</span>
<a name="l02685"></a>02685     <span class="keywordflow">if</span>(!m_isOwner)
<a name="l02686"></a>02686     {
<a name="l02687"></a>02687         <span class="keywordflow">if</span>(<a class="code" href="classopenni_1_1_device.html#a17435124df6c3c795fe9ff160fbeff74">isValid</a>()){
<a name="l02688"></a>02688             <span class="keywordflow">return</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333ac4a1d7871ca526614cc705cd34b67367">STATUS_OK</a>;
<a name="l02689"></a>02689         }<span class="keywordflow">else</span>{
<a name="l02690"></a>02690             <span class="keywordflow">return</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333a0210e71f7ee8690aed5ae1ce961e690b">STATUS_OUT_OF_FLOW</a>;
<a name="l02691"></a>02691         }
<a name="l02692"></a>02692     }
<a name="l02693"></a>02693 
<a name="l02694"></a>02694     OniDeviceHandle deviceHandle;
<a name="l02695"></a>02695     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> rc = (<a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a>)oniDeviceOpenEx(uri, mode, &amp;deviceHandle);
<a name="l02696"></a>02696     <span class="keywordflow">if</span> (rc != <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333ac4a1d7871ca526614cc705cd34b67367">STATUS_OK</a>)
<a name="l02697"></a>02697     {
<a name="l02698"></a>02698         <span class="keywordflow">return</span> rc;
<a name="l02699"></a>02699     }
<a name="l02700"></a>02700 
<a name="l02701"></a>02701     _setHandle(deviceHandle);
<a name="l02702"></a>02702 
<a name="l02703"></a>02703     <span class="keywordflow">return</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333ac4a1d7871ca526614cc705cd34b67367">STATUS_OK</a>;
<a name="l02704"></a>02704 }
<a name="l02705"></a>02705 
<a name="l02706"></a>02706 <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> Device::_setHandle(OniDeviceHandle deviceHandle)
<a name="l02707"></a>02707 {
<a name="l02708"></a>02708     <span class="keywordflow">if</span> (m_device == NULL)
<a name="l02709"></a>02709     {
<a name="l02710"></a>02710         m_device = deviceHandle;
<a name="l02711"></a>02711 
<a name="l02712"></a>02712         clearSensors();
<a name="l02713"></a>02713 
<a name="l02714"></a>02714         oniDeviceGetInfo(m_device, &amp;m_deviceInfo);
<a name="l02715"></a>02715 
<a name="l02716"></a>02716         <span class="keywordflow">if</span> (<a class="code" href="classopenni_1_1_device.html#aa79925de3c47e902b28123b846027ecc">isFile</a>())
<a name="l02717"></a>02717         {
<a name="l02718"></a>02718             m_pPlaybackControl = <span class="keyword">new</span> PlaybackControl(<span class="keyword">this</span>);
<a name="l02719"></a>02719         }
<a name="l02720"></a>02720 
<a name="l02721"></a>02721         <span class="comment">// Read deviceInfo</span>
<a name="l02722"></a>02722         <span class="keywordflow">return</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333ac4a1d7871ca526614cc705cd34b67367">STATUS_OK</a>;
<a name="l02723"></a>02723     }
<a name="l02724"></a>02724 
<a name="l02725"></a>02725     <span class="keywordflow">return</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333a0210e71f7ee8690aed5ae1ce961e690b">STATUS_OUT_OF_FLOW</a>;
<a name="l02726"></a>02726 }
<a name="l02727"></a>02727 
<a name="l02728"></a><a class="code" href="classopenni_1_1_device.html#a1804e9fe6cd46185f762d01e8d949518">02728</a> <span class="keywordtype">void</span> <a class="code" href="classopenni_1_1_device.html#a1804e9fe6cd46185f762d01e8d949518">Device::close</a>()
<a name="l02729"></a>02729 {
<a name="l02730"></a>02730     <span class="keywordflow">if</span> (m_pPlaybackControl != NULL)
<a name="l02731"></a>02731     {
<a name="l02732"></a>02732         <span class="keyword">delete</span> m_pPlaybackControl;
<a name="l02733"></a>02733         m_pPlaybackControl = NULL;
<a name="l02734"></a>02734     }
<a name="l02735"></a>02735 
<a name="l02736"></a>02736     <span class="keywordflow">if</span> (m_device != NULL)
<a name="l02737"></a>02737     {
<a name="l02738"></a>02738         <span class="keywordflow">if</span>(m_isOwner)
<a name="l02739"></a>02739         {
<a name="l02740"></a>02740             oniDeviceClose(m_device);
<a name="l02741"></a>02741         }
<a name="l02742"></a>02742 
<a name="l02743"></a>02743         m_device = NULL;
<a name="l02744"></a>02744     }
<a name="l02745"></a>02745 }
<a name="l02746"></a>02746 
<a name="l02747"></a>02747 
<a name="l02748"></a>02748 }
<a name="l02749"></a>02749 
<a name="l02750"></a>02750 <span class="preprocessor">#endif // _OPEN_NI_HPP_</span>
</pre></div></div><!-- contents -->


<hr class="footer"/><address class="footer"><small>
Generated on Tue Nov 12 2013 19:09:27 for OpenNI 2.0 by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
